flow AfterRenualQuest:
    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_11_Museum1stTalk:001', false)
    if event_flags_system['cLand:Museum3BuiltToday']:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:401', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:402', false)
    if event_flags_system['cPlayer:Owl1stTalkMuseum1']:
        if event_flags_system['cPlayer:OwlShowPaintingMyself']:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:403', false)
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:404', false)
        if EventFlowSystemActor.MuseumComplete():
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:405', false)
            event_flags_system['cPlayer:FutaExplanationDonationComp'] = true
        elif event_flags_system['cPlayer:FutaExplanationDonationComp']:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:406', false)
            event_flags_system['cPlayer:FutaExplanationDonationComp'] = false
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:407', false)
        if not event_flags_system['cPlayer:OwlShowFossilMyself']:
            event_flags_system['cPlayer:OwlShowFossilMyself'] = true
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_11_Museum1stTalk:004_03', false)
        if EventFlowSystemActor.MuseumComplete():
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_11_Museum1stTalk:004_04', false)
            event_flags_system['cPlayer:FutaExplanationDonationComp'] = true
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_11_Museum1stTalk:004_01', false)
        event_flags_system['cPlayer:OwlMultiDonateExplain'] = true
        event_flags_system['cPlayer:Owl1stTalkMuseum1'] = true
    event_flags_system['cPlayer:Owl1stTalkMuseum2'] = true
    EventFlowSystemActor.ExitFlowchart()
    return

flow BeforeRenualQuest:
    if (EventFlowSystemActor.MuseumLevel() == BlathersMuseumNoArt) and (not event_flags_system['cPlayer:OwlShowPaintingBeforeQuest']) and (not EventFlowSystemActor.MuseumDonationNumCheck(60)) and (EventFlowSystemActor.HasKindItem('cFilter', 'Picture', 'OwlDonation1_5')):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:201', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:202', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:203', false)
        fEvent1 = EventFlowSystemActor.MuseumLevel()
        if fEvent1 == BlathersMuseumNoArt:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:205', false)
            event_flags_system['cPlayer:OwlShowPaintingBeforeQuest'] = true
            EventFlowSystemActor.ExitFlowchart()
        elif fEvent1 == BlathersTent:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:204', false)
            event_flags_system['cPlayer:OwlShowPaintingBeforeQuest'] = true
            EventFlowSystemActor.ExitFlowchart()
    return

flow DiveFish_nothing:
    run Event33
    return

flow DonatePainting:
    if event_flags_system['cPlayer:OwlPaintingQuestDeclined']:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:302', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:301', false)
    EventFlowSystemActor.UIItemSelectWindowHandling(65534, '', 'cItemSelect', 'OwlDonation1_5', 'cItemFilter', false)
    if EventFlowSystemActor.UIResultMenuDecide():
        MainNpc.SetDeliveryItem(4, false)
        EventFlowSystemActor.SetTagFromUIResult(0, 'cItemName')
        MainNpc.NpcDelivery('Keep', 0)
        fEvent54 = MainNpc.OwlDonationItemType()
        if fEvent54 == 5:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:135', false)
            if event_flags_system['cPlayer:OwlPaintingQuestDeclined']:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:307', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:306', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:310', false)
                MainNpc.NpcDelivery('"Default"', 3)
                MainNpc.OwlDonationDone('MultiComplete', 'CompleteRoomType')
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:311', false)
                event_flags_system['cLand:MuseumGrowupEnable2'] = true
                event_flags_system['cPlayer:FutaReadyForMuseum2'] = true
                event_flags_system['cPlayer:OwlShowPaintingMyself'] = true
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:308', false)
                MainNpc.NpcDelivery('"Default"', 10)
                event_flags_system['cPlayer:OwlPaintingQuestDeclined'] = true
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:309', false)
                run Select5_Painting_Again
        elif fEvent54 == 6:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:138', false)
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:148', false)
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:139', false)
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:304', false)
            event_flags_system['cLifeSupportAchievement:DonateFake'] += 1
            MainNpc.NpcDelivery('"Default"', 10)
            run Select5_Painting_Again
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:105', true)
    return

flow QuestCheck:
    if (not event_flags_system['cLand:Museum2BuiltToday']) and (EventFlowSystemActor.MuseumDonationNumCheck(60)):
        if not event_flags_system['cLand:OwlWantsPainting']:
            event_flags_system['cLand:OwlWantsPainting'] = true
            event_flags_system['cLand:FoxPreVisitReserve'] = true
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:001', false)
            event_flags_system['cPlayer:OwlPaintingQuestExplain'] = true
            event_flags_system['cPlayer:OwlPaintingQuestReminder'] = true
            EventFlowSystemActor.ExitFlowchart()
        elif event_flags_system['cLand:MuseumGrowupEnable2']:
            if not event_flags_system['cPlayer:FutaReadyForMuseum2']:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:002', false)
                event_flags_system['cPlayer:FutaReadyForMuseum2'] = true
                EventFlowSystemActor.ExitFlowchart()
        else:
            if not event_flags_system['cPlayer:OwlPaintingQuestExplain']:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:001', false)
                event_flags_system['cPlayer:OwlPaintingQuestExplain'] = true
                event_flags_system['cPlayer:OwlPaintingQuestReminder'] = true
                EventFlowSystemActor.ExitFlowchart()
            elif EventFlowSystemActor.MuseumComplete():
                run Select4_Painting
                EventFlowSystemActor.ExitFlowchart()
            else:
                run Select5_Painting
                EventFlowSystemActor.ExitFlowchart()
    return

flow Root:
    fEvent32 = EventFlowSystemActor.MuseumLevel()
    if fEvent32 == BlathersMuseumArt:
        run SNPC_owl::NoTopic
    elif fEvent32 == BlathersMuseumNoArt:
        run QuestCheck
        run SNPC_owl::NoTopic
    return

flow Select4_Painting:
    if EventFlowSystemActor.HasKindItem('cFilter', 'Picture', 'OwlDonation1_5'):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:103', false)
        fEvent99 = EventFlowSystemActor.GeneralTalkChoice4()
        if fEvent99 == 1:
            run SNPC_owl_02_Museum_Judgment::Root
        elif fEvent99 == 2:
            run SNPC_owl_03_Museum_Commentary::Root
        elif fEvent99 == 3:
            run SNPC_owl_00_Common::End
        elif fEvent99 == 0:
            run DonatePainting
    else:
        run SNPC_owl_00_Common::Select3_Comp
    return

flow Select4_Painting_Again:
    if EventFlowSystemActor.HasKindItem('cFilter', 'Picture', 'OwlDonation1_5'):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:104', false)
        fEvent107 = EventFlowSystemActor.GeneralTalkChoice4()
        if fEvent107 == 1:
            run SNPC_owl_02_Museum_Judgment::Root
        elif fEvent107 == 2:
            run SNPC_owl_03_Museum_Commentary::Root
        elif fEvent107 == 3:
            run SNPC_owl_00_Common::End
        elif fEvent107 == 0:
            run DonatePainting
    else:
        run SNPC_owl_00_Common::Comp_Again
    return

flow Select5_Painting:
    if EventFlowSystemActor.HasKindItem('cFilter', 'Picture', 'OwlDonation1_5'):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:101', false)
        fEvent15 = EventFlowSystemActor.GeneralTalkChoice5()
        if fEvent15 == 1:
            run SNPC_owl_01_Museum_Donation::Root
        elif fEvent15 == 2:
            run SNPC_owl_02_Museum_Judgment::Root
        elif fEvent15 == 3:
            run SNPC_owl_03_Museum_Commentary::Root
        elif fEvent15 == 4:
            run SNPC_owl_00_Common::End
        elif fEvent15 == 0:
            run DonatePainting
    else:
        run SNPC_owl_00_Common::Select4
    return

flow Select5_Painting_Again:
    if not EventFlowSystemActor.HasKindItem('cFilter', 'Picture', 'OwlDonation1_5'):
        run SNPC_owl_00_Common::Select4_Again
    elif (not event_flags_system['cLand:OwlFoundDiveFish']) and (event_flags_system['cPlayer:OwlPaintingDiveFish']) and (EventFlowSystemActor.HasKindItem('cKind', 'DiveFish', '')):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:105', false)
        fEvent122 = EventFlowSystemActor.GeneralTalkChoice6()
        if fEvent122 == 2:
            run SNPC_owl_01_Museum_Donation::Root
        elif fEvent122 == 3:
            run SNPC_owl_02_Museum_Judgment::Root
        elif fEvent122 == 4:
            run SNPC_owl_03_Museum_Commentary::Root
        elif fEvent122 == 5:
            run SNPC_owl_00_Common::End
        elif fEvent122 == 1:
            run DonatePainting
        elif fEvent122 == 0:
            run SNPC_owl_23_Museum_DiveFish::DonateDiveFish
    else:
entrypoint Event33:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_22_Museum_RenualQuest:102', false)
        fEvent28 = EventFlowSystemActor.GeneralTalkChoice5()
        if fEvent28 == 1:
            run SNPC_owl_01_Museum_Donation::Root
        elif fEvent28 == 2:
            run SNPC_owl_02_Museum_Judgment::Root
        elif fEvent28 == 3:
            run SNPC_owl_03_Museum_Commentary::Root
        elif fEvent28 == 4:
            run SNPC_owl_00_Common::End
        elif fEvent28 == 0:
            run DonatePainting
    return

flow TodayTalk1st:
    if EventFlowSystemActor.MuseumLevel() == BlathersMuseumNoArt:
        run QuestCheck
    return

