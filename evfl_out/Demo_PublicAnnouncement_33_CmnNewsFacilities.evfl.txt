flow MuseumTentToday:
    run Event19
    return

flow NewsCampsite:
    fEvent64 = subflow_results[9]
    if fEvent64 == 2:
        run NewsConnect
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:151_02', false)
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:152', false)
        subflow_results[12] = 1
        subflow_results[14] = 1
    elif fEvent64 == 1:
        run NewsConnect
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:151_01', false)
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:152', false)
        subflow_results[12] = 1
        subflow_results[14] = 1
    return

flow NewsCampsiteGuest:
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:301', false)
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:302', false)
    subflow_results[9] = 0
    subflow_results[14] = 1
    return

flow NewsCeremony:
    if (subflow_results[0] == 0) or (EventFlowSystemActor.EventCheck('Countdown') == 3):
        if not event_flags_system['cPlayer:PAnnounceExplainCeremony']:
            event_flags_system['cPlayer:PAnnounceExplainCeremony'] = true
            if event_flags_system['cLand:PAnnounceCeremony1st']:
                if event_flags_system['cLand:PAnnounceCeremony1stToday']:
                    run sub_grp!Event96
                else:
                    if subflow_results[0] == 0:
                        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:192_01', false)
                    else:
                        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:192_01', false)
            else:
                event_flags_system['cLand:PAnnounceCeremony1st'] = true
                event_flags_system['cLand:PAnnounceCeremony1stToday'] = true
                run sub_grp!Event96
        elif subflow_results[0] == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:192_02', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:192_02', false)
    return

flow NewsConnect:
    if subflow_results[14] == 1:
        if subflow_results[0] == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:031', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:031', false)
    return

flow NewsMarket:
    if subflow_results[0] == 0:
        fEvent1 = subflow_results[7]
        if fEvent1 == 3:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:126', false)
            if EventFlowSystemActor.EnvHourCompare(22, -1, true, true) in (0, 1):
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:127_01', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:127_02', false)
            event_flags_system['cPlayer:PAnnounceHeardMarketUpgradeInfo'] = true
            subflow_results[14] = 1
        elif fEvent1 == 4:
            run NewsConnect
            if event_flags_system['cPlayer:PAnnounceHeardMarketUpgradeInfo']:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:129_01', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:129_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:130', false)
            subflow_results[14] = 1
        elif fEvent1 == 1:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:121_01', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:122', false)
            fEvent115 = EventFlowSystemActor.EnvHourCompare(8, -1, true, true)
            if fEvent115 == 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:123_01', false)
            elif fEvent115 == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:123_02', false)
            elif fEvent115 == 2:
                if EventFlowSystemActor.EnvHourCompare(22, -1, true, true) == 0:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:123_01', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:123_03', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:124', false)
            if EventFlowSystemActor.FacilityOpenPastDays('cMarket1', 8):
                subflow_results[12] = 1
                subflow_results[14] = 1
            else:
                subflow_results[14] = 1
        elif fEvent1 == 2:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:121_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:122', false)
            fEvent115 = EventFlowSystemActor.EnvHourCompare(8, -1, true, true)
            if fEvent115 == 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:123_01', false)
            elif fEvent115 == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:123_02', false)
            elif fEvent115 == 2:
                if EventFlowSystemActor.EnvHourCompare(22, -1, true, true) == 0:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:123_01', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:123_03', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:124', false)
            if EventFlowSystemActor.FacilityOpenPastDays('cMarket1', 8):
                subflow_results[12] = 1
                subflow_results[14] = 1
            else:
                subflow_results[14] = 1
        elif fEvent1 == 5:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:131_01', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:132', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent1 == 6:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:131_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:132', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
    else:
        fEvent14 = subflow_results[7]
        if fEvent14 == 3:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:126', false)
            if EventFlowSystemActor.EnvHourCompare(22, -1, true, true) in (0, 1):
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:127_01', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:127_02', false)
            event_flags_system['cPlayer:PAnnounceHeardMarketUpgradeInfoSza'] = true
            subflow_results[14] = 1
        elif fEvent14 == 4:
            run NewsConnect
            if event_flags_system['cPlayer:PAnnounceHeardMarketUpgradeInfoSza']:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:129_01', false)
            else:
                if event_flags_system['cPlayer:PAnnounceHeardMarketUpgradeInfo']:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:129_03', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:129_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:130', false)
            subflow_results[14] = 1
        elif fEvent14 == 5:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:131_01', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:132', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent14 == 6:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:131_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:132', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
    return

flow NewsMuseum:
    if subflow_results[0] == 0:
        fEvent13 = subflow_results[6]
        if fEvent13 == 1:
            run NewsConnect
entrypoint Event19:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:101_01', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:102', false)
            if event_flags_system['cLand:MuseumGrowupEnable1']:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:103_02', false)
                event_flags_system['cPlayer:RcoPAnnounceMuseumSP'] = true
                subflow_results[14] = 1
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:103_01', false)
                subflow_results[14] = 1
        elif fEvent13 == 2:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:101_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:102', false)
            if event_flags_system['cLand:MuseumGrowupEnable1']:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:103_02', false)
                event_flags_system['cPlayer:RcoPAnnounceMuseumSP'] = true
                subflow_results[14] = 1
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:103_01', false)
                subflow_results[14] = 1
        elif fEvent13 == 4:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:111_01', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:112', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent13 == 6:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:113', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:114', false)
            EventFlowSystemActor.WaitFrame(10)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:115', false)
            EventFlowSystemActor.WaitFrame(10)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:116', false)
            subflow_results[14] = 1
        elif fEvent13 == 7:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:117', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:119', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent13 == 8:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:118', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:119', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent13 == 5:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:111_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:112', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent13 == 3:
            run NewsConnect
            if event_flags_system['cPlayer:RcoPAnnounceMuseumSP']:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:104_02', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:104_01', false)
            if event_flags_system['cLand:FinishMuseumPreparation1stDay']:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:105_01', true)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:105_02', true)
            EventFlowSystemActor.WaitFrame(10)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:106', true)
            EventFlowSystemActor.WaitFrame(10)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:107', false)
            subflow_results[14] = 1
    else:
        fEvent2 = subflow_results[6]
        if fEvent2 == 6:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:113', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:114', false)
            EventFlowSystemActor.WaitFrame(10)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:115', false)
            EventFlowSystemActor.WaitFrame(10)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:116', false)
            subflow_results[14] = 1
        elif fEvent2 == 7:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:117', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:119', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent2 == 8:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:118', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:119', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent2 == 4:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:111_01', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:112', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent2 == 5:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:111_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:112', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent2 == 3:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:104_01', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:105_02', true)
            EventFlowSystemActor.WaitFrame(10)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:106', true)
            EventFlowSystemActor.WaitFrame(10)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:107', false)
            subflow_results[14] = 1
    return

flow NewsTailor:
    if subflow_results[0] == 0:
        fEvent17 = subflow_results[8]
        if fEvent17 == 1:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:141_01', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:142', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent17 == 2:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:141_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:142', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
    else:
        fEvent18 = subflow_results[8]
        if fEvent18 == 1:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:141_01', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:142', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
        elif fEvent18 == 2:
            run NewsConnect
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:141_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:142', false)
            subflow_results[12] = 1
            subflow_results[14] = 1
    return

flow Root:
    if (subflow_results[0] != 0) and (subflow_results[9] not in (0, 1, 2)):
        run NewsCampsiteGuest
    run NewsMuseum
    run NewsMarket
    run NewsTailor
    if subflow_results[0] == 0:
        if (subflow_results[12] == 1) and (not event_flags_system['cLand:OfficeConstruction1']):
            run NewsCeremony
    else:
        run NewsCampsite
        if subflow_results[12] == 1:
            run NewsCeremony
    return

flow sub_grp!Event96:
    if subflow_results[0] == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:191', false)

