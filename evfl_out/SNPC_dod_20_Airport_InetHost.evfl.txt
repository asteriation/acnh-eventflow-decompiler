flow EntryPoint_BestFriend:
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    EventFlowSystemActor.NetCreateSessionVillage('cBestFriend')
    if event_flags_system['cPlayer:EquipLicenseHelmet']:
        run SNPC_dod_AirPort::LandMakingRemove_Host
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
    EventFlowSystemActor.OpenVillageGate(false)
    return

flow EntryPoint_Friend:
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    if not EventFlowSystemActor.NetHasFriend():
        EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:220', true)
    elif event_flags_system['cPlayer:MainmenuFriendList']:
        EventFlowSystemActor.NetCreateSessionVillage('cFriend')
        if event_flags_system['cPlayer:EquipLicenseHelmet']:
            run SNPC_dod_AirPort::LandMakingRemove_Host
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
        EventFlowSystemActor.OpenVillageGate(false)
    else:
        run SNPC_dod_22_Airport_InstallFriendList::Root
        EventFlowSystemActor.NetCreateSessionVillage('cFriend')
        if event_flags_system['cPlayer:EquipLicenseHelmet']:
            run SNPC_dod_AirPort::LandMakingRemove_Host
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
        EventFlowSystemActor.OpenVillageGate(false)
    return

flow EntryPoint_InetHost:
    if not event_flags_system['cPlayer:OdekakeFirstInternet']:
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:092', true)
        EventFlowSystemActor.OpenMessageWindow('Dialog/DIALOG_Msg:0804', true)
        event_flags_system['cPlayer:OdekakeFirstInternet'] = true
    MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:130', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        EventFlowSystemActor.MessageSuspend()
        run SNPC_dod_AirPort::EntryPoint_PreProcedure
        run System_ServerRegistration::UserRegist
        run SNPC_dod_AirPort::EntryPoint_PostProcedure
        if (event_flags_system['cPlayer:UploadPlayerProfileIllegal']) and (not event_flags_system['cPlayer:ImprovePlayerProfile']):
            EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:700', true)
        else:
            if EventFlowSystemActor.NetHasAddressData('cBestFriend'):
                MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:301', false)
                fEvent19 = EventFlowSystemActor.GeneralTalkChoice4()
                if fEvent19 == 0:
                    run EntryPoint_Friend
                elif fEvent19 == 3:
                    EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
                    run SNPC_dod_AirPort::EntryPoint_Cancel_Nega
                elif fEvent19 == 2:
                    run EntryPoint_Keyword
                elif fEvent19 == 1:
                    run EntryPoint_BestFriend
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:300', false)
                fEvent48 = EventFlowSystemActor.GeneralTalkChoice3()
                if fEvent48 == 0:
                    run EntryPoint_Friend
                elif fEvent48 == 1:
                    run EntryPoint_Keyword
                elif fEvent48 == 2:
                    EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
                    run SNPC_dod_AirPort::EntryPoint_Cancel_Nega
    else:
        run SNPC_dod_AirPort::EntryPoint_Cancel_Nega
    return

flow EntryPoint_Keyword:
    if not event_flags_system['cPlayer:OdekakeTutorialKeyword']:
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:400', false)
        event_flags_system['cPlayer:OdekakeTutorialKeyword'] = true
    if EventFlowSystemActor.NetHasAddressData('cBestFriend'):
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:402', false)
        fEvent31 = EventFlowSystemActor.GeneralTalkChoice3()
        if fEvent31 == 2:
            run EntryPoint_KeywordAnybody
        elif fEvent31 == 0:
            run EntryPoint_KeywordOnlyFriend
        elif fEvent31 == 1:
            run EntryPoint_KeywordOnlyBestFriend
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:401', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run EntryPoint_KeywordOnlyFriend
        else:
            run EntryPoint_KeywordAnybody
    return

flow EntryPoint_KeywordAnybody:
    MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:403', false)
    fEvent55 = EventFlowSystemActor.GeneralTalkChoice3()
    if fEvent55 == 0:
        EventFlowSystemActor.NetCreateSessionVillage('cPassword')
        EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
        if event_flags_system['cPlayer:EquipLicenseHelmet']:
            run SNPC_dod_AirPort::LandMakingRemove_Host
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
        EventFlowSystemActor.OpenVillageGate(false)
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:405', true)
        run SNPC_dod_AirPort::EntryPoint_CheckOpenGateFirst
    elif fEvent55 == 2:
        EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
        run SNPC_dod_AirPort::EntryPoint_Cancel_Nega
    elif fEvent55 == 1:
        run EntryPoint_KeywordOnlyFriend
    return

flow EntryPoint_KeywordOnlyBestFriend:
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    EventFlowSystemActor.NetCreateSessionVillage('cPwBestFriend')
    run Event112
    return

flow EntryPoint_KeywordOnlyFriend:
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    if not EventFlowSystemActor.NetHasFriend():
        EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:220', true)
    elif event_flags_system['cPlayer:MainmenuFriendList']:
        EventFlowSystemActor.NetCreateSessionVillage('cLimited')
entrypoint Event112:
        EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
        if event_flags_system['cPlayer:EquipLicenseHelmet']:
            run SNPC_dod_AirPort::LandMakingRemove_Host
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
        EventFlowSystemActor.OpenVillageGate(false)
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:405', true)
    else:
        run SNPC_dod_22_Airport_InstallFriendList::Root
        EventFlowSystemActor.NetCreateSessionVillage('cLimited')
entrypoint Event112:
        EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
        if event_flags_system['cPlayer:EquipLicenseHelmet']:
            run SNPC_dod_AirPort::LandMakingRemove_Host
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
        EventFlowSystemActor.OpenVillageGate(false)
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:405', true)
    return

