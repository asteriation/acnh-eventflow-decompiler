flow Init:
    MainNpc.NpcRegistAIBlackBoard('DemoSpeak', 0)
    if EventFlowSystemActor.SystemCheckNowStage('cPhotoStudio'):
        MainNpc.NpcAISetRequestSpeakFunc('cCeremonyDemoAlw', false)
    return

flow Root:
    if (EventFlowSystemActor.TermEventNow('JuneBride', false)) and (event_flags_system['cPlayer:CommuneIslandAvailable']) and (not EventFlowSystemActor.SystemCheckNowStage('cPhotoStudio')):
        if not event_flags_system['cPlayer:SpnJuneBrideTalkEventFrag']:
            MainNpc.NpcAISetting(3, false)
            MainNpc.NpcChangeConversationPretenseState('cConversationPretense', 'Root', 'SNPC_alw_01_Studio', '', false, true, 0, 'spn')
        elif event_flags_system['cLandTemp:JuneBrideCeremonyDemoAfterNow']:
            MainNpc.NpcAISetting(4, false)
            run AI_NPC_Common::ContinueSpeak
        else:
            run sub_grp!Event10
    else:
        run sub_grp!Event10
    return

flow ExitStrc:
    if EventFlowSystemActor.SystemCheckNowStage('cPhotoStudio'):
        MainNpc.NpcChangeAIState('cExitReaction', '', '', '', false, false)
    return

flow PartyEnd:
    run AI_NPC_Common::ContinueSpeak
    return

flow sub_grp!Event10:
    if (not MainNpc.NpcCheckStateSelectTiming('cInit')) and (MainNpc.NpcBlackBoard('DemoSpeak', 1)):
        MainNpc.NpcSetAIBlackBoard('DemoSpeak', 0)
        run AI_NPC_Common::ContinueSpeak
    else:
        if event_flags_system['cLandTemp:JuneBrideCeremonyDemoAfterNow']:
            MainNpc.NpcChangeAIState('cWait', 'Demo_CelemonyJuneBride', 'PartyEnd_LisaTalk', '', false, false)
        elif event_flags_system['cLandTemp:RemakeJuneBrideTalkTimeAfterNow']:
            run AI_NPC_Common::ContinueSpeak
        elif MainNpc.NpcCheckStateSelectTiming('cInit'):
            MainNpc.NpcChangeAIState('cEnterReaction', 'SNPC_alw_01_Studio', '', '', false, false)
        else:
            MainNpc.NpcChangeAIState('cWait', 'SNPC_alw_01_Studio', '', '', false, false)

