flow AlreadyFenceUnlock:
    run Event98
    return

flow Connect_DayOnce:
    if (not event_flags_system['cPlayerTemp:RcoTentAskedHintTmp']) and (not ((event_flags_system['cPlayer:MakeVillagePlayerFlag']) and (event_flags_system['cLand:RcmImmQuestRunning']))):
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:101', false)
        event_flags_system['cPlayerTemp:RcoTentAskedHintTmp'] = true
    return

flow Rco_Hint_AboutDIYWS:
    run Event31
    return

flow Rco_Hint_AboutLoan:
    run Event6
    return

flow Rco_Hint_AboutRemakeWS:
    run Event96
    return

flow Rco_Hint_AboutSetMuseumTent:
    run Event1
    return

flow Rco_Hint_AfterBuildHouse:
    run Event5
    return

flow Rco_Hint_Complete:
    run sub_Event88
    return

flow Rco_Hint_WaitingInvite1stCamper:
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:351', false)
    return

flow Rco_Hint_WaitingOpenCampSite:
    if (not event_flags_system['cPlayer:EnableDiyRemake']) and (EventFlowSystemActor.RandomChoiceExcludePrevious2(2, true) != 0):
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:901', false)
    else:
        if event_flags_system['cPlayer:IslandDevQuestTalkAfterBuildCamp']:
            fEvent54 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
            if fEvent54 == 0:
                if event_flags_system['cLand:CampSiteBuiltToday']:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:163_01_02', false)
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:163_02', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:164', false)
            elif fEvent54 == 1:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:164', false)
            elif fEvent54 == 2:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:162_01_02', false)
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:162_02', false)
        else:
            fEvent46 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
            if fEvent46 == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:163_01_01', false)
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:163_02', false)
            elif fEvent46 == 1:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:162_01_01', false)
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:162_02', false)
            elif fEvent46 == 2:
                if event_flags_system['cPlayer:IslandDevQuestCampSetMySelf']:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:161_01', false)
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:161_02', false)
    return

flow Root:
    if not event_flags_system['cPlayer:MakeVillagePlayerFlag']:
        run Root_SubPlayer
    elif event_flags_system['cLand:IslandDevQuestRunning']:
        run SNPC_rco_54_IslandDevelopment::Root
    else:
        run Connect_DayOnce
        if event_flags_system['cPlayer:EnableDiyRemake']:
            if event_flags_system['cLand:Plorogue4BuiltMuseum']:
                run sub_Event88
            else:
                run Rco_Hint_AboutSetMuseumTent
        elif event_flags_system['cPlayer:RcoEnableRemakeTrial']:
entrypoint Event96:
            if event_flags_system['cPlayer:RcoRemakeTrialOngoing']:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:902', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:901', false)
        elif event_flags_system['cLand:RcmImmQuestComplete']:
            if event_flags_system['cLand:Plorogue4BuiltMuseum']:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:151', false)
                fEvent64 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
                if fEvent64 == 0:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:152_01', false)
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:152_02', false)
                elif fEvent64 == 1:
                    if event_flags_system['cPlayer:ImmQGetQuestPrize']:
                        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:153_01', false)
                    else:
                        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:153_02', false)
                elif fEvent64 == 2:
                    if subflow_results[15] == 0:
                        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:154_02', false)
                    else:
                        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:154_01', false)
            else:
                run Rco_Hint_AboutSetMuseumTent
        elif event_flags_system['cLand:RcmImmQuestRunning']:
            run SNPC_rco_53_MigrantsQuest::Root
        elif not event_flags_system['cPlayer:MainmenuRecipe']:
entrypoint Event31:
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:102', false)
            event_flags_system['cPlayer:RcoTentEnableDIYtrial'] = true
        elif (EventFlowSystemActor.MuseumLevel() != BlathersNotMovedIn) and (EventFlowSystemActor.PlayerHouseLevel() not in (Homeless, PlacedTent)):
entrypoint Event5:
            if not event_flags_system['cPlayer:RcmTookQuestReq']:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:130', false)
            elif event_flags_system['cPlayer:Prologue4RcmGetTent']:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:150', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:140', false)
                if (not EventFlowSystemActor.HasKindItem('cKind', 'Axe', '')) and (not EventFlowSystemActor.HasTargetItem(2502, 1)):
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:140_01', false)
                    if EventFlowSystemActor.ShoppingCapacity(2502, 'cItemName'):
                        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:140_02', false)
                        MainNpc.SetDeliveryItemAtRandom(2502, true, 'cVillageRemakePattern', 0)
                        MainNpc.NpcDelivery('Default', 1)
                        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:140_03', false)
        else:
entrypoint Event1:
            if not EventFlowSystemActor.MuseumDonationNumCheck(5):
                if event_flags_system['cPlayer:MakeVillagePlayerFlag']:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:103', false)
                else:
                    run Rco_Hint_AboutLoan
            elif event_flags_system['cLand:Plorogue4BuiltMuseum']:
                if not event_flags_system['cPlayer:RcoHeardThanksForBuiltOwlTent']:
                    event_flags_system['cPlayer:RcoHeardThanksForBuiltOwlTent'] = true
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:105', false)
entrypoint Event6:
                if event_flags_system['cPlayer:RcoPaid1stCharge']:
                    fEvent34 = EventFlowSystemActor.PlayerHouseLevel()
                    if fEvent34 == PlacedTent:
                        if event_flags_system['cHouse:HouseOrder1']:
                            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:109', false)
                        else:
                            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:108', false)
                    elif fEvent34 in (BaseHouse, HouseExpansion1, BackRoom, LeftRoom, RightRoom, SecondFloor, Basement):
                        run Rco_Hint_AfterBuildHouse
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:106', false)
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:107', false)
            else:
                if EventFlowSystemActor.HasTargetItem(2755, 1):
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:104', false)
                else:
                    run Rco_Hint_AboutLoan
    return

flow Root_SubPlayer:
    run Connect_DayOnce
    fEvent100 = EventFlowSystemActor.PlayerHouseLevel()
    if fEvent100 == Homeless:
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:110', false)
    elif fEvent100 == PlacedTent:
        if event_flags_system['cPlayer:MainmenuRecipe']:
            run Rco_Hint_AboutLoan
        else:
            run Rco_Hint_AboutDIYWS
    elif fEvent100 in (BaseHouse, HouseExpansion1, BackRoom, LeftRoom, RightRoom, SecondFloor, Basement):
        if not event_flags_system['cPlayer:MainmenuRecipe']:
            run Rco_Hint_AboutDIYWS
        elif event_flags_system['cPlayer:EnableDiyRemake']:
            run Rco_Hint_Complete
        elif event_flags_system['cPlayer:RcoEnableRemakeTrial']:
            run Rco_Hint_AboutRemakeWS
        elif not event_flags_system['cLand:RcmImmQuestComplete']:
entrypoint Event98:
            if event_flags_system['cLand:RcmImmQuestRunning']:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:162', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:160', false)
        elif event_flags_system['cPlayer:ObjRcoMachineHeardFenceRecipe']:
            run AlreadyFenceUnlock
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:163', false)
            event_flags_system['cPlayer:ObjRcoMachineHeardFenceRecipe'] = true
    return

flow sub_Event88:
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:900', false)
    return

