flow CmnBdayChk:
    fEvent47 = EventFlowSystemActor.CountBirthdayVillager()
    if fEvent47 == 1:
        subflow_results[3] = 1
    elif fEvent47 == 2:
        subflow_results[3] = 2
        EventFlowSystemActor.SetBirthdayVillagerName(0, 0)
    elif fEvent47 == 3:
        subflow_results[3] = 3
        EventFlowSystemActor.SetBirthdayVillagerName(1, 0)
    elif fEvent47 == 4:
        subflow_results[3] = 4
        EventFlowSystemActor.SetBirthdayVillagerName(0, 0)
    elif fEvent47 == 5:
        subflow_results[3] = 5
        EventFlowSystemActor.SetBirthdayVillagerName(0, 0)
        EventFlowSystemActor.SetBirthdayVillagerName(1, 0)
    elif fEvent47 in (6, 7):
        subflow_results[3] = 2
        EventFlowSystemActor.SetBirthdayVillagerName(0, 0)
    elif fEvent47 == 8:
        subflow_results[3] = 3
        EventFlowSystemActor.SetBirthdayVillagerName(1, 0)
    elif fEvent47 == 9:
        if EventFlowSystemActor.MainPlayerIsBirthday(false):
            subflow_results[3] = 6
        else:
            subflow_results[3] = 7
            EventFlowSystemActor.SetBirthdayVillagerName(0, 0)
    return

flow Root:
    if EventFlowSystemActor.EnvSameDate('cNewYear', 'cNowTime'):
        subflow_results[1] = 6
    elif EventFlowSystemActor.EnvSameDate('cLunarNewYear', 'cNowTime'):
        subflow_results[1] = 7
        run sub_grp!Event14
    else:
        fEvent1 = EventFlowSystemActor.EnvTimeZone()
        if fEvent1 == Morning0:
            subflow_results[1] = 0
            run sub_grp!Event14
        elif fEvent1 == Morning1:
            subflow_results[1] = 1
            run sub_grp!Event14
        elif fEvent1 == Afternoon0:
            subflow_results[1] = 2
            run sub_grp!Event14
        elif fEvent1 == Afternoon1:
            subflow_results[1] = 3
            run sub_grp!Event14
        elif fEvent1 == Evening0:
            subflow_results[1] = 4
            run sub_grp!Event14
        elif fEvent1 == Evening1:
            subflow_results[1] = 5
            run sub_grp!Event14
    return

flow sub_grp!Event14:
    fEvent14 = EventFlowSystemActor.EventCheck('Countdown')
    if fEvent14 in (0, 1):
        subflow_results[2] = 9
    elif fEvent14 in (2, 3):
        fEvent6 = EventFlowSystemActor.EventCheck('FishingConvention')
        if fEvent6 in (0, 1):
            fEvent28 = EventFlowSystemActor.EnvWeatherArea()
            if fEvent28 == cWeatherArea_North:
                fEvent4 = EventFlowSystemActor.EnvMonth()
                if fEvent4 == January:
                    subflow_results[2] = 4
                elif fEvent4 == April:
                    subflow_results[2] = 1
                elif fEvent4 == July:
                    subflow_results[2] = 2
                elif fEvent4 == October:
                    subflow_results[2] = 3
            elif fEvent28 == cWeatherArea_South:
                fEvent0 = EventFlowSystemActor.EnvMonth()
                if fEvent0 == January:
                    subflow_results[2] = 2
                elif fEvent0 == April:
                    subflow_results[2] = 3
                elif fEvent0 == July:
                    subflow_results[2] = 4
                elif fEvent0 == October:
                    subflow_results[2] = 1
        elif fEvent6 in (2, 3):
            if EventFlowSystemActor.EventCheck('InsectConvention') in (0, 1):
                fEvent29 = EventFlowSystemActor.EnvWeatherArea()
                if fEvent29 == cWeatherArea_North:
                    fEvent24 = EventFlowSystemActor.EnvMonth()
                    if fEvent24 == June:
                        subflow_results[2] = 5
                    elif fEvent24 == July:
                        subflow_results[2] = 6
                    elif fEvent24 == August:
                        subflow_results[2] = 7
                    elif fEvent24 == September:
                        subflow_results[2] = 8
                elif fEvent29 == cWeatherArea_South:
                    fEvent30 = EventFlowSystemActor.EnvMonth()
                    if fEvent30 == January:
                        subflow_results[2] = 7
                    elif fEvent30 == February:
                        subflow_results[2] = 8
                    elif fEvent30 == November:
                        subflow_results[2] = 5
                    elif fEvent30 == December:
                        subflow_results[2] = 6

