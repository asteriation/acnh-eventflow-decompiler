flow Unlock_ChatLog:
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:101', false)
    MainNpc.SmartPhone(0)
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:102', false)
    MainNpc.SmartPhone(4)
    EventFlowSystemActor.WaitFrame(10)
    MainNpc.SmartPhoneSE('Phone_Control', 2)
    EventFlowSystemActor.WaitFrame(30)
    MainNpc.SmartPhoneSE('Phone_Sending', 2)
    EventFlowSystemActor.WaitFrame(30)
    event_flags_system['cPlayer:MainmenuChatLog'] = true
    EventFlowSystemActor.UIMenuDeviceAppear('cInstall', 'cChatLog')
    EventFlowSystemActor.WaitFrame(30)
    MainNpc.SmartPhone(5)
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:103', false)
    MainNpc.SmartPhone(1)
    EventFlowSystemActor.MessageLockNext(1)
    EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Save:001', false)
    EventFlowSystemActor.SaveSimpleSave('cAll')
    EventFlowSystemActor.MessageSuspend()
    EventFlowSystemActor.MessageUnlockNext()
    return

flow WebSetting_Activate:
    EventFlowSystemActor.MessageSuspend()
    EventFlowSystemActor.CheckFreeCommunication(true)
    if EventFlowSystemActor.IsApprovedFreeCommunication():
        EventFlowSystemActor.MessageLockNext(1)
        EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Network:030', false)
        if EventFlowSystemActor.NetMode() not in (0, 2):
            EventFlowSystemActor.NetShutdown('cNetShutdown', false)
        EventFlowSystemActor.NetConnectInit('cConnectInet', true)
        if EventFlowSystemActor.CheckErrorType(2):
            run WebSetting_Activate_Failed
        else:
            EventFlowSystemActor.NetCheckNSA('cCheckNSA', true)
            if EventFlowSystemActor.CheckErrorType(2):
                run WebSetting_Activate_Failed
            else:
                EventFlowSystemActor.NetGetPOPID(true)
                if EventFlowSystemActor.CheckErrorType(2):
                    run WebSetting_Activate_Failed
                else:
                    EventFlowSystemActor.UploadProfile(False)
                    if not EventFlowSystemActor.CheckErrorType(2):
                        EventFlowSystemActor.NotifyUseNSOAppli('cNotifyUseNSOAppli', true)
                        if EventFlowSystemActor.CheckErrorType(2):
                            run WebSetting_Activate_Failed
                        else:
                            EventFlowSystemActor.MessageSuspend()
                            run WebSetting_Activate_Success
                    elif EventFlowSystemActor.NetIsAppError('cUploadProfile'):
                        EventFlowSystemActor.MessageSuspend()
                        EventFlowSystemActor.OpenMessageWindow('Dialog/DIALOG_Msg:0820', true)
                        run WebSetting_Activate_Failed
                    else:
                        run WebSetting_Activate_Failed
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:151', true)
        run SNPC_rco_92_OtherSettings::Seq_Close
    return

flow WebSetting_Activate_Failed:
    EventFlowSystemActor.MessageSuspend()
    EventFlowSystemActor.MessageUnlockNext()
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:150', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        run WebSetting_Activate
    else:
        run SNPC_rco_92_OtherSettings::Sel_EndMenu
    return

flow WebSetting_Activate_Success:
    event_flags_system['cPlayer:Activate_WebService'] = true
    EventFlowSystemActor.MessageSuspend()
    EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Save:001', false)
    EventFlowSystemActor.SaveSimpleSave('cAll')
    EventFlowSystemActor.MessageSuspend()
    EventFlowSystemActor.MessageUnlockNext()
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:100', false)
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:120', false)
    run SNPC_rco_92_OtherSettings::Seq_Close
    return

flow WebSetting_Explain:
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:200', false)
    if event_flags_system['cPlayer:Activate_WebService']:
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:021', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run WebSetting_Explain
        else:
            run SNPC_rco_92_OtherSettings::Sel_EndMenu
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:020', false)
        fEvent8 = EventFlowSystemActor.GeneralTalkChoice3()
        if fEvent8 == 2:
            run SNPC_rco_92_OtherSettings::Sel_EndMenu
        elif fEvent8 == 0:
            run WebSetting_Activate
        elif fEvent8 == 1:
            run WebSetting_Explain
    return

flow WebSetting_Main:
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:001', false)
    if event_flags_system['cPlayer:Activate_WebService']:
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:015', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run WebSetting_Explain
        else:
            run SNPC_rco_92_OtherSettings::Sel_EndMenu
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_93_BlancoSettings:010', false)
        fEvent4 = EventFlowSystemActor.GeneralTalkChoice3()
        if fEvent4 == 0:
            run WebSetting_Activate
        elif fEvent4 == 1:
            run WebSetting_Explain
        elif fEvent4 == 2:
            run SNPC_rco_92_OtherSettings::Sel_EndMenu
    return

