flow ChkCompReport:
    if (not event_flags_system['cLand:OwlFoundDiveFish']) and (not EventFlowSystemActor.MuseumComplete()) and (event_flags_system['cLand:OwlFoundFossil']) and (not event_flags_system['cPlayer:OwlExplainDiveFishAfterComp']):
        event_flags_system['cPlayer:OwlExplainDiveFishAfterComp'] = true
        event_flags_system['cPlayer:FutaExplanationDonationComp'] = false
        event_flags_system['cPlayer:OwlPaintingDiveFish'] = true
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:001', false)
        EventFlowSystemActor.ExitFlowchart()
    return

flow DonateDiveFish:
    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:201', false)
    EventFlowSystemActor.UIItemSelectWindowHandling(65534, 'DiveFish', '', '', 'cItemKind', false)
    if EventFlowSystemActor.UIResultMenuDecide():
        event_flags_system['cLand:OwlFoundDiveFish'] = true
        event_flags_system['cPlayer:OwlShowDiveFishReport'] = true
        event_flags_system['cPlayer:FutaExplanationDonationComp'] = false
        MainNpc.SetDeliveryItem(4, false)
        EventFlowSystemActor.SetTagFromUIResult(0, 'cItemName')
        MainNpc.NpcDelivery('Keep', 0)
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:120', false)
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:205', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:206', false)
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:131', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:132', false)
                MainNpc.OwlOpenItemMessage()
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:133', false)
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:113', true)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:134', true)
            MainNpc.NpcDelivery('"Default"', 3)
            MainNpc.OwlDonationDone('MultiComplete', 'CompleteRoomType')
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:207', false)
            MainNpc.NpcDelivery('"Default"', 10)
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:204', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:202', false)
    return

flow Root:
    if not event_flags_system['cLand:OwlFoundDiveFish']:
        fEvent64 = EventFlowSystemActor.MuseumLevel()
        if fEvent64 == BlathersMuseumArt:
            if event_flags_system['cPlayer:OwlPaintingDiveFish']:
                run Select5_DiveFish
        elif fEvent64 == BlathersMuseumNoArt:
            if (event_flags_system['cLand:OwlWantsPainting']) and (not event_flags_system['cLand:MuseumGrowupEnable2']) and (event_flags_system['cPlayer:OwlPaintingQuestExplain']):
                if event_flags_system['cPlayer:OwlPaintingDiveFish']:
                    run Select4_DiveFish
            else:
                run Select5_DiveFish
    elif event_flags_system['cPlayer:OwlShowDiveFishReport']:
        fEvent28 = EventFlowSystemActor.MuseumLevel()
        if fEvent28 == BlathersTent:
            run SNPC_owl_10_Tent::OwlTentDefaultChoice
        elif fEvent28 in (BlathersMuseumNoArt, BlathersMuseumArt):
            run SNPC_owl_22_Museum_RenualQuest::Root
    else:
entrypoint Event52:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:301', false)
        event_flags_system['cPlayer:OwlShowDiveFishReport'] = true
    return

flow Select4_DiveFish:
    if not EventFlowSystemActor.HasKindItem('cKind', 'DiveFish', ''):
        if (EventFlowSystemActor.HasKindItem('cFilter', 'Picture', 'OwlDonation1_5')) and (not event_flags_system['cLand:Museum3Built']):
            run SNPC_owl_22_Museum_RenualQuest::Select5_Painting_Again
        else:
            run SNPC_owl_10_Tent::OwlTentDefaultChoice
    elif (EventFlowSystemActor.HasKindItem('cFilter', 'Picture', 'OwlDonation1_5')) and (not event_flags_system['cLand:Museum3Built']):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:103', false)
        fEvent12 = EventFlowSystemActor.GeneralTalkChoice6()
        if fEvent12 == 1:
            run SNPC_owl_22_Museum_RenualQuest::DonatePainting
        elif fEvent12 == 2:
            run SNPC_owl_01_Museum_Donation::Root
        elif fEvent12 == 3:
            run SNPC_owl_02_Museum_Judgment::Root
        elif fEvent12 == 0:
            run DonateDiveFish
        elif fEvent12 == 4:
            run SNPC_owl_03_Museum_Commentary::Root
        elif fEvent12 == 5:
            run SNPC_owl_00_Common::End
    else:
        run Select5_DiveFish
    return

flow Select4_DiveFish_Again:
    if EventFlowSystemActor.HasKindItem('cKind', 'DiveFish', ''):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:104', false)
        fEvent68 = EventFlowSystemActor.GeneralTalkChoice4()
        if fEvent68 == 1:
            run SNPC_owl_01_Museum_Donation::Root
        elif fEvent68 == 3:
            run SNPC_owl_00_Common::End
        elif fEvent68 == 0:
            run DonateDiveFish
        elif fEvent68 == 2:
            run SNPC_owl_02_Museum_Judgment::Root
    else:
        run SNPC_owl_00_Common::Select3_Again
    return

flow Select5_DiveFish:
    if EventFlowSystemActor.HasKindItem('cKind', 'DiveFish', ''):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:101', false)
        fEvent4 = EventFlowSystemActor.GeneralTalkChoice5()
        if fEvent4 == 1:
            run SNPC_owl_01_Museum_Donation::Root
        elif fEvent4 == 2:
            run SNPC_owl_02_Museum_Judgment::Root
        elif fEvent4 == 3:
            run SNPC_owl_03_Museum_Commentary::Root
        elif fEvent4 == 4:
            run SNPC_owl_00_Common::End
        elif fEvent4 == 0:
            run DonateDiveFish
    else:
        run SNPC_owl_22_Museum_RenualQuest::Root
    return

flow Select5_DiveFish_Again:
    if EventFlowSystemActor.NetHasVisitor():
        run SNPC_owl::NoTopic
    elif EventFlowSystemActor.HasKindItem('cKind', 'DiveFish', ''):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_23_Museum_DiveFish:102', false)
        fEvent20 = EventFlowSystemActor.GeneralTalkChoice5()
        if fEvent20 == 1:
            run SNPC_owl_01_Museum_Donation::Root
        elif fEvent20 == 2:
            run SNPC_owl_02_Museum_Judgment::Root
        elif fEvent20 == 3:
            run SNPC_owl_03_Museum_Commentary::Root
        elif fEvent20 == 4:
            run SNPC_owl_00_Common::End
        elif fEvent20 == 0:
            run DonateDiveFish
    else:
        run SNPC_owl_00_Common::Painting_Again
    return

flow TodayTalk1st:
    run Event52
    return

