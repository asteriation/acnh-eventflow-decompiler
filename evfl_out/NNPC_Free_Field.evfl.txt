flow Root:
    run NNPC_FreeA::First_Chk
    run Free_Field1
    return

flow ReSelection:
    run Event42
    return

flow Free_Field1:
    run NNPC_FreeD::Moving_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeH::Progress_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeB::WeatherSP_Chk
    if EventFlowSystemActor.PercentChoice(50):
entrypoint Event6:
        run NNPC_FreeEF::FreeF_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeEF::Event_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeD::KeywordB
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeD::KeywordA
    run Free_Field2
    return

flow Free_Field2:
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeD::Rumor_Action_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeD::RumorN_Chk
    run Free_Field3
    return

flow Free_Field3:
    if EventFlowSystemActor.PercentChoice(25):
        run NNPC_FreeEF::Snpc_Chk
    if EventFlowSystemActor.PercentChoice(25):
        run NNPC_FreeA::ClothesN1_Chk
    if EventFlowSystemActor.PercentChoice(25):
        run NNPC_FreeA::ClothesP_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeEF::HHA_Chk
    run Free_Field4
    return

flow Free_Field4:
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeB::ItemN_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeB::SpotSP_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeB::Furniture_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeB::ItemP_Chk
    run Free_Filed5
    return

flow Free_Field6:
    event_flags_system['cPlayerTemp:NnpcTalkSelectCount'] = 0
entrypoint Event42:
    if event_flags_system['cPlayerTemp:NnpcTalkSelectCount'] >= 10:
        run ReSelect1
    else:
        event_flags_system['cPlayerTemp:NnpcTalkSelectCount'] += 1
        fEvent45 = MainNpc.CheckNpcFavorLevel()
        if fEvent45 in (0, 1):
            run BestFriend
        elif fEvent45 in (2, 3, 4):
            run GoodFriend
        elif fEvent45 == 5:
            run Friend
    return

flow Friend:
    if EventFlowSystemActor.PercentChoice(13):
        run NNPC_FreeB::Spot_Chk
    if EventFlowSystemActor.PercentChoice(19):
        run NNPC_FreeB::Seasons_Chk
    if EventFlowSystemActor.PercentChoice(24):
        run NNPC_FreeA::Week_Chk
    if EventFlowSystemActor.PercentChoice(39):
        run NNPC_FreeB::Weather_Chk
    if EventFlowSystemActor.PercentChoice(63):
        run NNPC_FreeA::ClothesN2_Chk
    run NNPC_FreeA::FieldQuestions_Chk
    return

flow GoodFriend:
    if EventFlowSystemActor.PercentChoice(9):
        run NNPC_FreeB::Spot_Chk
    if EventFlowSystemActor.PercentChoice(15):
        run NNPC_FreeB::Seasons_Chk
    if EventFlowSystemActor.PercentChoice(18):
        run NNPC_FreeA::Week_Chk
    if EventFlowSystemActor.PercentChoice(29):
        run NNPC_FreeB::Weather_Chk
    if EventFlowSystemActor.PercentChoice(40):
        run NNPC_FreeA::ClothesN2_Chk
    if EventFlowSystemActor.PercentChoice(67):
        run NNPC_FreeA::Always_Chk
    run NNPC_FreeA::FieldQuestions_Chk
    return

flow BestFriend:
    if EventFlowSystemActor.PercentChoice(5):
        run NNPC_FreeB::Spot_Chk
    if EventFlowSystemActor.PercentChoice(11):
        run NNPC_FreeB::Seasons_Chk
    if EventFlowSystemActor.PercentChoice(13):
        run NNPC_FreeA::Week_Chk
    if EventFlowSystemActor.PercentChoice(21):
        run NNPC_FreeB::Weather_Chk
    if EventFlowSystemActor.PercentChoice(27):
        run NNPC_FreeA::ClothesN2_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeA::AlwaysAB_Chk
    if EventFlowSystemActor.PercentChoice(75):
        run NNPC_FreeA::Always_Chk
    run NNPC_FreeA::FieldQuestions_Chk
    return

flow ReSelect1:
entrypoint Event87:
    fEvent87 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
    if fEvent87 == 0:
        if event_flags_npc['cNpcMemory:TalkReSelectLast'] == 1:
            run NNPC_FreeB::Reselection_Seasons
        else:
            run ReSelect2
    elif fEvent87 == 1:
        if event_flags_npc['cNpcMemory:TalkReSelectLast'] == 2:
            run NNPC_FreeA::ReSelection_Week
        else:
            run ReSelect2
    elif fEvent87 == 2:
        if event_flags_npc['cNpcMemory:TalkReSelectLast'] == 3:
            run NNPC_FreeB::Reselection_Weather
        else:
            run ReSelect2
    return

flow ReSelect2:
    run Event87
    return

flow Free_Filed5:
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeD::RumorO_Favorite_Chk
    if EventFlowSystemActor.PercentChoice(50):
        run NNPC_FreeD::RumorP_Favorite_Chk
    if MainNpc.NpcIsSitting() not in (0, 1, 2, 3, 5):
        if EventFlowSystemActor.PercentChoice(20):
            run NNPC_FreeA::Want_Chk
        if (MainNpc.NpcIsSitting() not in (0, 1, 2, 3, 5)) and (EventFlowSystemActor.PercentChoice(20)):
            run NNPC_FreeI::Present_Chk
    run Free_Field6
    return

flow Fireworks_1.4:
    run Event6
    return

