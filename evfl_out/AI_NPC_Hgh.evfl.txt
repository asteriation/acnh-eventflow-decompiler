flow Init:
    if EventFlowSystemActor.SystemCheckNowStage('cMametubu'):
        event_flags_system['cLandTemp:HghStayMarketNow'] = true
    else:
        MainNpc.NpcAISetting(8, true)
    return

flow Root:
    if MainNpc.NpcCheckStateSelectTiming('cInit'):
        if EventFlowSystemActor.SystemCheckNowStage('cMametubu'):
            MainNpc.NpcAISetting(3, false)
            MainNpc.NpcAISetting(2, false)
            MainNpc.NpcChangeConversationPretenseState('cConversationPretense', 'Root', 'SNPC_hgh', '', false, true, 0, 'rcm')
        else:
            MainNpc.NpcChangeWaitState('cWait', 'Root', 'SNPC_hgh', '', true, true, 0, true, '')
    elif MainNpc.NpcCheckStateSelectTiming('cTalkEnd'):
        MainNpc.NpcAISetting(9, true)
        MainNpc.NpcAISetting(5, true)
        if EventFlowSystemActor.SystemCheckNowStage('cTailor'):
            MainNpc.NpcSetAIBlackBoard('CheckItemIndex', -1)
            run sub_Event3
        elif MainNpc.NpcIsInvisible():
            MainNpc.NpcChangeInvisibleState('cInvisible', 'Root', 'SNPC_hgh', '', true, true, 0)
        else:
            run sub_Event3
    else:
        MainNpc.NpcChangeWaitState('cWait', 'Root', 'SNPC_hgh', '', true, true, 0, true, '')
    return

flow sub_Event3:
    MainNpc.NpcChangeTurnDefaultState('cTurn', '', 'Root', 'SNPC_hgh', true, true, true, 2, 0.0, '')

