flow AfterRemakeCeremony:
    run SNPC_alw_01_Studio::Alw_DayChk
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:100', false)
    run SNPC_alw_01_Studio::Alw_AfterClear_Flag
    run SNPC_alw_01_Studio::Alw_GetItem
    run SNPC_alw_01_Studio::Alw_ThanksMsg
    event_flags_system['cLandTemp:RemakeJuneBrideTalkTimeAfterNow'] = false
    return

flow Get_Dish:
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:101', false)
    EventFlowSystemActor.SelectRewardItemDirect(12565, 1, 'cVillageRemakePattern', 0)
    if EventFlowSystemActor.ShoppingCapacity(65534, 'cReward'):
        MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:102_01', false)
        MainNpc.SetDeliveryItem(1, true)
        MainNpc.NpcDelivery('Default', 1)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:102_02', false)
        EventFlowSystemActor.SystemMailSend('cAlw_Alp', 'MAIL_SNpc_alw_JuneBride', 'cFastTomorrow', 'cReward', 'cNone', false, 5)
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:103', false)
    SubNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:104', false)
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:105', false)
    fork:
        branch0:
        branch1:
            MainNpc.TurnBody(2, 0.0)
        branch2:
            Player.TurnBody(2, 0.0)
    MainNpc.CharacterEmoticonAction('Smiling', '', 0, true, true)
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:106', false)
    Npc_2.OpenMessageWindow(false, 'TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:107')
    EventFlowSystemActor.WaitFrame(20)
    fork:
        branch0:
        branch1:
            MainNpc.TurnBody(10, 0.0)
        branch2:
            EventFlowSystemActor.WaitFrame(5)
            SubNpc.TurnBody(10, 0.0)
        branch3:
            EventFlowSystemActor.WaitFrame(7)
            Npc_2.TurnBody(10, 0.0)
    if EventFlowSystemActor.EnvCheckBetweenDate(6, 30, 6, 30, 'cGrowUpTime'):
        MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:109', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:108', false)
    event_flags_system['cPlayer:AlwJuneBrideLastDayTalkFlag'] = true
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:110', false)
    fork:
        branch0:
        branch1:
            MainNpc.CharacterEmoticonAction('Greeting', '', 60, true, false)
        branch2:
            EventFlowSystemActor.WaitFrame(3)
            SubNpc.CharacterEmoticonAction('Greeting', '', 60, true, false)
        branch3:
            EventFlowSystemActor.WaitFrame(50)
    fork:
        branch0:
        branch1:
            MainNpc.CharacterEmoticonAction('Smiling', '', 0, true, true)
        branch2:
            SubNpc.CharacterEmoticonAction('Smiling', '', 0, true, true)
        branch3:
            Npc_2.CharacterEmoticonAction('Smiling', '', 0, true, true)
    return

flow Root:
    run SNPC_alw_01_Studio::Alw_DayChk
    fork:
        branch0:
        branch1:
            MainNpc.TurnBody(10, 0.0)
            MainNpc.CharacterEmoticonAction('Smiling', '', 0, true, false)
        branch2:
            SubNpc.TurnBody(10, 0.0)
            SubNpc.CharacterEmoticonAction('FaintSmile', '', 0, true, true)
        branch3:
            Npc_2.TurnBody(10, 0.0)
            Npc_2.CharacterEmoticonAction('Smiling', '', 0, true, true)
    EventFlowSystemActor.BGMPropertyControl(91)
    EventFlowSystemActor.CameraSetDemoParam('Npc:alw', 'DemoJB_Cut2', 'cDefault', false, false, false, 0)
    event_flags_system['cLandTemp:JuneBrideCeremonyDemoAfterNow'] = false
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:100', false)
    run SNPC_alw_01_Studio::Alw_AfterClear_Flag
    run SNPC_alw_01_Studio::Alw_GetItem
    event_flags_system['cPlayer:AlwJuneBrideQuestClearFlag'] = true
    run Get_Dish
    EventFlowSystemActor.SystemRequestChangeStage('cPhotoStudioIslandHouse', 'cCircle', 'cCircle', 'cBlack', 1.0, 1.0)
    return

flow Root_Init:
    MainNpc.NpcAITalkSubCastEntry(1, 'alp')
    MainNpc.NpcAITalkSubCastEntry(2, 'spn')
    return

