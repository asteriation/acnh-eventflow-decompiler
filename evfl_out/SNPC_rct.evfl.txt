flow RctCongratMyhome:
    if (EventFlowSystemActor.PlayerHouseLevel() == 2) and (not event_flags_system['cPlayer:RctHintCongratsMyhome']):
        event_flags_system['cPlayer:RctOutsideHintToday'] = true
        event_flags_system['cPlayer:RctHintCongratsMyhome'] = true
        MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:061_04_01', false)
        if event_flags_system['cLand:RcmShopMaterialComplete']:
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:061_04_03', false)
            event_flags_system['cPlayer:RctTnx4CollectingMaterials2'] = true
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:061_04_02', false)
        EventFlowSystemActor.ExitFlowchart()
    return

flow RctHintCmn:
    run Event102
    return

flow Root:
    if not EventFlowSystemActor.IsMyVillage():
        MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:009', false)
    elif event_flags_system['cPlayer:RctTalkBeforeFalg']:
        run RctCongratMyhome
        if event_flags_system['cPlayer:RctOutsideHintToday']:
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:003_02', false)
        else:
            event_flags_system['cPlayer:RctOutsideHintToday'] = true
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:003_01', false)
        if event_flags_system['cPlayer:DecideShopArea']:
            if event_flags_system['cPlayer:RctTnx4ConfirmingStorePlace']:
                run RctHintCmn
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:061_03', false)
                event_flags_system['cPlayer:RctTnx4ConfirmingStorePlace'] = true
        elif event_flags_system['cLand:RcmShopMaterialComplete']:
            if not event_flags_system['cPlayer:Prologue4RcmGetTent']:
                run sub_Event24
            elif event_flags_system['cPlayer:RctTnx4CollectingMaterials2']:
                run RctHintCmn
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:061_02', false)
                event_flags_system['cPlayer:RctTnx4CollectingMaterials2'] = true
        elif event_flags_system['cPlayer:RcmTookQuestReq']:
            if event_flags_system['cPlayer:RctTnx4CollectingMaterials']:
                run sub_Event24
            else:
                event_flags_system['cPlayer:RctTnx4CollectingMaterials'] = true
                MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:061_01', false)
        elif event_flags_system['cPlayer:RcoTalked1stAfterPrologue']:
            if event_flags_system['cPlayer:MainmenuRecipe']:
entrypoint Event102:
                if (event_flags_system['cLand:MuseumBuilt']) and (EventFlowSystemActor.PercentChoice(70)):
                    MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:052', false)
                else:
                    if (not event_flags_system['cLand:TodayCreateVillage']) and (not EventFlowSystemActor.PercentChoice(80)):
                        MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:051', false)
                    else:
                        MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:050', false)
            else:
                run sub_grp!Event7
        elif EventFlowSystemActor.RandomChoice2(2) == 0:
            run sub_grp!Event7
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:011', false)
    else:
        event_flags_system['cPlayer:RctTalkBeforeFalg'] = true
        event_flags_system['cPlayer:RctOutsideHintToday'] = true
        if not event_flags_system['cLand:TodayCreateVillage']:
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:001_02', false)
        elif event_flags_system['cPlayer:MakeVillagePlayerFlag']:
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:001_01', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:001_02', false)
        if event_flags_system['cLand:Prologue4BuiltShop']:
            if event_flags_system['cPlayer:DecideShopArea']:
                MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:001_05', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:001_06', false)
        elif EventFlowSystemActor.SystemCheckNowStage('cIdrTanukichi'):
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:001_04', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:001_03', false)
    return

flow sub_Event24:
    run RctHintCmn

flow sub_grp!Event7:
    if not EventFlowSystemActor.SystemCheckNowStage('cIdrTanukichi'):
        MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:012', false)
    elif event_flags_system['cPlayer:RcoDIYtrialOngoing']:
        MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:013_02', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/rct/SP_rct:013_01', false)

