flow Donation_Accept:
    run Event11
    return

flow Donation_Decline:
    run Event12
    return

flow Fossil_Check:
    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:204', false)
    MainNpc.OwlFossilAppraise()
    EventFlowSystemActor.SetTagFromUIResult(0, 'cItemName')
    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:205', false)
    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:206', false)
    return

flow Root:
    if EventFlowSystemActor.HasKindItem('cKind', 'FossilUnknown', ''):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:202', true)
        EventFlowSystemActor.UIItemSelectWindowHandling(65534, '', 'cItemSelect', 'OwlFossilJudgement', 'cItemFilter', false)
        if EventFlowSystemActor.UIResultMenuDecide():
            MainNpc.SetDeliveryItem(4, false)
            MainNpc.NpcDelivery('Keep', 0)
            if EventFlowSystemActor.UIResultItemWindowNumCheck('cItemSelect', 2):
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:214', false)
                MainNpc.OwlFossilAppraise()
                fEvent27 = MainNpc.AppraiseFossilDonationRate()
                if fEvent27 == 2:
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:219', false)
                    MainNpc.NpcDelivery('"Default"', 10)
                    run SNPC_owl_00_Common::Again
                elif fEvent27 == 0:
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:215', false)
                    run sub_grp!Event20
                elif fEvent27 == 1:
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:216', false)
                    run sub_grp!Event20
            else:
                run Fossil_Check
                if MainNpc.OwlIsDonation('cUISelect'):
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:209', true)
                    MainNpc.NpcDelivery('"Default"', 10)
                    run SNPC_owl_00_Common::Again
                else:
                    fEvent188 = EventFlowSystemActor.MuseumLevel()
                    if fEvent188 in (BlathersMuseumNoArt, BlathersMuseumArt):
                        if EventFlowSystemActor.NetHasVisitor():
                            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:210', false)
                            MainNpc.NpcDelivery('"Default"', 10)
                            run SNPC_owl_00_Common::Again
                        else:
                            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:213', false)
                            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
entrypoint Event11:
                                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:221', false)
                                run SNPC_owl_01_Museum_Donation::Fossil_DonationTypeChk
                            else:
entrypoint Event12:
                                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:220', true)
                                MainNpc.NpcDelivery('"Default"', 10)
                                if not event_flags_system['cLand:OwlFoundFossil']:
                                    run SNPC_owl_01_Museum_Donation::Eplanation_ExpertOpinion
                                run SNPC_owl_00_Common::Again
                    elif fEvent188 == BlathersTent:
                        if EventFlowSystemActor.MuseumDonationNumCheck(20):
                            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:227', false)
                            MainNpc.NpcDelivery('"Default"', 10)
                        elif EventFlowSystemActor.MuseumDonationNumCheck(19):
                            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:212', false)
                            run sub_grp!Event195
                        else:
                            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:211', false)
                            run sub_grp!Event195
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:203', false)
            run SNPC_owl_00_Common::Again
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:201', true)
        run SNPC_owl_00_Common::Again
    return

flow sub_grp!Event195:
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        run Donation_Accept
    else:
        run Donation_Decline

flow sub_grp!Event20:
    fEvent20 = EventFlowSystemActor.MuseumLevel()
    if fEvent20 in (BlathersMuseumNoArt, BlathersMuseumArt):
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:217', false)
        MainNpc.NpcDelivery('"Default"', 10)
        run SNPC_owl_00_Common::Again
    elif fEvent20 == BlathersTent:
        if EventFlowSystemActor.MuseumDonationNumCheck(20):
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:228', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:229', false)
        MainNpc.NpcDelivery('"Default"', 10)
        run SNPC_owl_00_Common::Again

