flow MoveCancel:
    fEvent9 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
    if fEvent9 == 0:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Moving:004', false)
    elif fEvent9 == 1:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Moving:005', false)
    elif fEvent9 == 2:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Moving:006', false)
    MainNpc.SetNpcMoveoutStopInfo(0)
    event_flags_npc['cNpcMemory:MoveCancelTalk'] = true
entrypoint Event18:
    event_flags_npc['cNpcMemory:NextMoveOutTalk'] = true
    event_flags_system['cLand:IsMovingConsultationToPlayer'] = true
    return

flow MoveConfirm:
    fEvent13 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
    if fEvent13 == 0:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Moving:007', false)
    elif fEvent13 == 1:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Moving:008', false)
    elif fEvent13 == 2:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Moving:009', false)
    MainNpc.SetNpcMoveoutStopInfo(1)
    run Event18
    return

flow Moving:
    fEvent4 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
    if fEvent4 == 0:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Moving:001', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run MoveCancel
        else:
            run MoveConfirm
    elif fEvent4 == 1:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Moving:002', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run MoveCancel
        else:
            run MoveConfirm
    elif fEvent4 == 2:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Moving:003', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run MoveCancel
        else:
            run MoveConfirm
    return

flow Stay:
    MainNpc.SetPlayerName(1)
    if MainNpc.IsMovingConsultationPlayerNotLiving():
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Stay:004', false)
    else:
        fEvent31 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
        if fEvent31 == 0:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Stay:001', false)
        elif fEvent31 == 1:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Stay:002', false)
        elif fEvent31 == 2:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachD_Stay:003', false)
    event_flags_npc['cNpcMemory:MoveCancelTalk'] = true
    return

