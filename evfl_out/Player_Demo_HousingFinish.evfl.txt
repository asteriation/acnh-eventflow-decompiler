flow HousingFinish_PcTent_Built:
    event_flags_system['cLand:Prologue4BuiltPlayer'] = true
    if event_flags_system['cPlayer:MakeVillagePlayerFlag']:
        MainNpc.OpenMessageWindow('TalkSys/SYS_Player:951', true)
    else:
        MainNpc.OpenMessageWindow('TalkSys/SYS_Player:951_01', false)
    if event_flags_system['cLand:OpeningSeqBGMChangeCounter'] <= 2:
        event_flags_system['cLand:OpeningSeqBGMChangeCounter'] = 3
    return

flow HousingFinish_HATent_Built:
    EventFlowSystemActor.SetTagFromUIResult(0, 'cTentNpcName')
    MainNpc.OpenMessageWindow('TalkSys/SYS_Player:954', true)
    event_flags_system['cLand:Prologue4BuiltNpcHA'] = true
    if event_flags_system['cLand:Prologue4BuiltNpcAN']:
entrypoint Event11:
        EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Player:954_01', false)
        EventFlowSystemActor.SetNpcAIBlackBoardByLabel('isSpeak', 1, 'rco', 1)
    return

flow HousingFinish_ANTent_Built:
    EventFlowSystemActor.SetTagFromUIResult(0, 'cTentNpcName')
    MainNpc.OpenMessageWindow('TalkSys/SYS_Player:954', true)
    event_flags_system['cLand:Prologue4BuiltNpcAN'] = true
    if event_flags_system['cLand:Prologue4BuiltNpcHA']:
        run Event11
    return

flow HousingFinish_NnpcNewProperty:
    if EventFlowSystemActor.NpcHouseNum('cExist') < 7:
        MainNpc.OpenMessageWindow('TalkSys/SYS_Player:955', true)
        event_flags_system['cLand:CountNnpcHouseSpaceSet'] += 1
        event_flags_system['cLand:HaveHousingKitCount'] += -1
    else:
        MainNpc.OpenMessageWindow('TalkSys/SYS_Player:955_01', false)
        event_flags_system['cLand:CountNnpcHouseSpaceSet'] += 1
        event_flags_system['cLand:RcoBuildFirstVisitorsHousingKitComplete'] = true
        event_flags_system['cPlayer:SetHousingKitForFirstCamper'] = true
        EventFlowSystemActor.Set6thVillager(1)
    return

flow HousingFinish_OwlTent_Built:
    MainNpc.OpenMessageWindow('TalkSys/SYS_Player:952', true)
    event_flags_system['cLand:Plorogue4BuiltMuseum'] = true
    event_flags_system['cPlayer:DecidedMuseumTentPlace'] = true
    event_flags_system['cPlayer:RcoTalkAfterMuseumTent'] = true
    return

flow HousingFinish_Shop_Built:
    MainNpc.OpenMessageWindow('TalkSys/SYS_Player:953', true)
    event_flags_system['cLand:Prologue4BuiltShop'] = true
    event_flags_system['cLand:HghStayMarket'] = true
    event_flags_system['cPlayer:DecideShopArea'] = true
    return

flow HousingFinish_CampSite_Built:
    MainNpc.OpenMessageWindow('TalkSys/SYS_Player:957', true)
    event_flags_system['cLand:RcoBuildCampsiteComplete'] = true
    event_flags_system['cPlayer:IslandDevQuestCampSetMySelf'] = true
    return

flow HousingFinish_Tailor_Built:
    MainNpc.OpenMessageWindow('TalkSys/SYS_Player:953_01', false)
    event_flags_system['cLand:TailorReserved'] = true
    event_flags_system['cPlayer:KinuyoTailorBuildFlag'] = true
    event_flags_system['cLand:EnableHghStayField'] = false
    return

flow HousingFinish_NnpcImmigrateQuestA:
    Player.OpenMessageWindow('TalkSys/SYS_Player:956', false)
    event_flags_system['cLand:ImmQ_A_SetHousing'] = true
    event_flags_system['cPlayer:ImmQSetHousingAbyMySelf'] = true
    run Event124
    return

flow HF_ImmQ_Calling:
    EventFlowSystemActor.WaitFrame(15)
    Player.SmartPhoneSE('Phone_Incoming', 0)
    EventFlowSystemActor.WaitFrame(30)
    Player.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:000', true)
    Player.SmartPhone(0)
    Player.SmartPhone(4)
    EventFlowSystemActor.WaitFrame(15)
    Player.SmartPhoneSE('Phone_Incoming', 1)
    Player.SmartPhoneSE('Phone_Unlock', 2)
    Player.SmartPhone(2)
    EventFlowSystemActor.SwapSpeaker('cRco', true)
    if event_flags_system['cPlayer:RcoReciveMigrantEvPhone1st']:
        EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:003_01', false)
        EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:003_02', true)
    else:
        EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:001', false)
        EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:002_01', false)
        if subflow_results[0] != 0:
            EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:002_02', false)
            event_flags_system['cPlayer:RcoHeardLadderExplain'] = true
        EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:002_03', true)
    Player.SmartPhone(3)
    Player.SmartPhone(4)
    EventFlowSystemActor.WaitFrame(15)
    Player.SmartPhoneSE('Phone_Unlock', 2)
    EventFlowSystemActor.WaitFrame(15)
    Player.SmartPhone(1)
    event_flags_system['cPlayer:RcoReciveMigrantEvPhone1st'] = true
    return

flow HF_ImmQ_Check:
    if (not event_flags_system['cPlayer:RcoReciveMigrantEvPhone1st']) or (subflow_results[0] == 1):
        run HF_ImmQ_Calling
        EventFlowSystemActor.SwapSpeaker('cNone', true)
    return

flow HF_ImmQ_Calling_Init:
    MainNpc.NpcAITalkCastSetting('Prologue_Rco')
    return

flow HousingFinish_NnpcImmigrateQuestB:
    subflow_results[0] = 1
    Player.OpenMessageWindow('TalkSys/SYS_Player:956_01', false)
    event_flags_system['cLand:ImmQ_B_SetHousing'] = true
    event_flags_system['cPlayer:ImmQSetHousingBbyMySelf'] = true
entrypoint Event124:
    event_flags_system['cLand:CountNnpcHouseSpaceSet'] += 1
    run HF_ImmQ_Check
    return

flow HousingFinish_NnpcImmigrateQuestC:
    Player.OpenMessageWindow('TalkSys/SYS_Player:956_02', false)
    event_flags_system['cLand:ImmQ_C_SetHousing'] = true
    event_flags_system['cPlayer:ImmQSetHousingCbyMySelf'] = true
    run Event124
    return

flow RecipeGetA:
    if event_flags_system['cLand:ImmQ_A_OutdoorPattern']:
        EventFlowSystemActor.PlayerSetCraftRecipe(3675, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(1170, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(1266, '')
    else:
        EventFlowSystemActor.PlayerSetCraftRecipe(3398, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(3397, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(3229, '')
    run RecipeGet_Fruit
    EventFlowSystemActor.PlayerSetCraftRecipe(2559, '')
    return

flow RecipeGetB:
    if event_flags_system['cLand:ImmQ_B_OutdoorPattern']:
        EventFlowSystemActor.PlayerSetCraftRecipe(2586, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(3396, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(331, '')
    else:
        EventFlowSystemActor.PlayerSetCraftRecipe(1626, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(1627, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(333, '')
    EventFlowSystemActor.PlayerSetCraftRecipe(3205, '')
    EventFlowSystemActor.PlayerSetCraftRecipe(1565, '')
    EventFlowSystemActor.PlayerSetCraftRecipe(3206, '')
    run RecipeGet_Flower
    EventFlowSystemActor.PlayerSetCraftRecipe(2615, '')
    return

flow RecipeGetC:
    if event_flags_system['cLand:ImmQ_C_OutdoorPattern']:
        EventFlowSystemActor.PlayerSetCraftRecipe(4035, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(4038, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(2326, '')
    else:
        EventFlowSystemActor.PlayerSetCraftRecipe(4040, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(4042, '')
        EventFlowSystemActor.PlayerSetCraftRecipe(880, '')
    EventFlowSystemActor.PlayerSetCraftRecipe(2605, '')
    EventFlowSystemActor.PlayerSetCraftRecipe(1913, '')
    EventFlowSystemActor.PlayerSetCraftRecipe(4073, '')
    return

flow RecipeGet_Fruit:
    fEvent95 = EventFlowSystemActor.LandFruit()
    if fEvent95 == 0:
        EventFlowSystemActor.PlayerSetCraftRecipe(4011, 'SeqRcoAlbeit')
        EventFlowSystemActor.PlayerSetCraftRecipe(4012, 'SeqRcoAlbeit')
    elif fEvent95 == 1:
        EventFlowSystemActor.PlayerSetCraftRecipe(3976, 'SeqRcoAlbeit')
        EventFlowSystemActor.PlayerSetCraftRecipe(3975, 'SeqRcoAlbeit')
    elif fEvent95 == 2:
        EventFlowSystemActor.PlayerSetCraftRecipe(1263, 'SeqRcoAlbeit')
        EventFlowSystemActor.PlayerSetCraftRecipe(4546, 'SeqRcoAlbeit')
    elif fEvent95 == 3:
        EventFlowSystemActor.PlayerSetCraftRecipe(4128, 'SeqRcoAlbeit')
        EventFlowSystemActor.PlayerSetCraftRecipe(4127, 'SeqRcoAlbeit')
    elif fEvent95 == 4:
        EventFlowSystemActor.PlayerSetCraftRecipe(4134, 'SeqRcoAlbeit')
        EventFlowSystemActor.PlayerSetCraftRecipe(2596, 'SeqRcoAlbeit')
    return

flow RecipeGet_Flower:
    fEvent106 = EventFlowSystemActor.VillageFlower('cBirthday')
    if fEvent106 == 0:
        EventFlowSystemActor.PlayerSetCraftRecipe(5467, 'None')
    elif fEvent106 == 1:
        EventFlowSystemActor.PlayerSetCraftRecipe(5641, 'None')
    elif fEvent106 == 2:
        EventFlowSystemActor.PlayerSetCraftRecipe(4293, 'None')
    elif fEvent106 == 3:
        EventFlowSystemActor.PlayerSetCraftRecipe(5468, 'None')
    elif fEvent106 == 4:
        EventFlowSystemActor.PlayerSetCraftRecipe(5437, 'None')
    elif fEvent106 == 5:
        EventFlowSystemActor.PlayerSetCraftRecipe(5436, 'None')
    elif fEvent106 == 6:
        EventFlowSystemActor.PlayerSetCraftRecipe(5670, 'None')
    elif fEvent106 == 7:
        EventFlowSystemActor.PlayerSetCraftRecipe(5466, 'None')
    return

flow HousingFinish_Bridge:
    Player.OpenMessageWindow('TalkSys/SYS_Player:958', false)
    if EventFlowSystemActor.UIPocketMenuItemSelected(7211):
        event_flags_system['cLand:ImmQ_SetBridge'] = true
        event_flags_system['cPlayer:ImmQSetBridgeKitMySelf'] = true
        event_flags_system['cPlayer:ImmQTalkRcoBridgeKitSet'] = true
        event_flags_system['cPlayer:RcoImmQClear1QuestToday'] = true
    else:
        event_flags_system['cLand:RcoBuildBridgeSlopeStatusCounter'] = 2
        if not event_flags_system['cPlayer:RcoTalkAboutHaniwa']:
            fEvent193 = EventFlowSystemActor.EventBranch(false, 0)
            if fEvent193 in (0, 1, 2, 4, 5, 6, 7):
                run PhoneCallAboutGyroid
            elif fEvent193 == 3:
                event_flags_system['cPlayer:RcoTalkAboutHaniwa'] = true
    return

flow HousingFinish_Slope:
    Player.OpenMessageWindow('TalkSys/SYS_Player:959', false)
    event_flags_system['cLand:RcoBuildBridgeSlopeStatusCounter'] = 2
    if not event_flags_system['cPlayer:RcoTalkAboutHaniwa']:
        fEvent194 = EventFlowSystemActor.EventBranch(false, 0)
        if fEvent194 in (0, 1, 2, 4, 5, 6, 7):
            run PhoneCallAboutGyroid
        elif fEvent194 == 3:
            event_flags_system['cPlayer:RcoTalkAboutHaniwa'] = true
    return

flow PhoneCallAboutGyroid:
    EventFlowSystemActor.WaitFrame(15)
    Player.SmartPhoneSE('Phone_Incoming', 0)
    EventFlowSystemActor.WaitFrame(30)
    Player.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:201', true)
    Player.SmartPhone(0)
    Player.SmartPhone(4)
    EventFlowSystemActor.WaitFrame(15)
    Player.SmartPhoneSE('Phone_Incoming', 1)
    Player.SmartPhoneSE('Phone_Unlock', 2)
    Player.SmartPhone(2)
    EventFlowSystemActor.SwapSpeaker('cRco', true)
    EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:202', false)
    EventFlowSystemActor.SetTagFromUIResult(0, 'cBridgeSlopeKitName')
    EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:203', false)
    EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:204', false)
    EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:205', false)
    EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:206', false)
    EventFlowSystemActor.OpenMessageWindow('TalkSNpc/rco/SP_rco_20_PhoneCall:207', false)
    Player.SmartPhone(3)
    Player.SmartPhone(4)
    EventFlowSystemActor.WaitFrame(15)
    Player.SmartPhoneSE('Phone_Unlock', 2)
    EventFlowSystemActor.WaitFrame(15)
    Player.SmartPhone(1)
    EventFlowSystemActor.SwapSpeaker('cNone', true)
    event_flags_system['cPlayer:RcoTalkAboutHaniwa'] = true
    return

flow HousingFinish_PcHouseMove:
    Player.OpenMessageWindow('TalkSys/SYS_Player:960', false)
    event_flags_system['cLand:RcoMoveReservedAnyone'] = 2
    event_flags_system['cPlayer:RcoMoveHousingSetSomeBuild'] = true
    return

flow HousingFinish_NPCHouseMove:
    EventFlowSystemActor.SetTagFromUIResult(0, 'cTentNpcName')
    Player.OpenMessageWindow('TalkSys/SYS_Player:960_01', false)
    event_flags_system['cLand:RcoMoveReservedAnyone'] = 2
    event_flags_system['cPlayer:RcoMoveHousingSetSomeBuild'] = true
    return

flow HousingFinish_MuseumMove:
    Player.OpenMessageWindow('TalkSys/SYS_Player:960_02', false)
    event_flags_system['cLand:RcoMoveReservedAnyone'] = 2
    event_flags_system['cPlayer:RcoMoveHousingSetSomeBuild'] = true
    return

flow HousingFinish_ShopMove:
    Player.OpenMessageWindow('TalkSys/SYS_Player:960_03', false)
    event_flags_system['cLand:RcoMoveReservedAnyone'] = 2
    event_flags_system['cPlayer:RcoMoveHousingSetSomeBuild'] = true
    return

flow HousingFinish_TailorMove:
    Player.OpenMessageWindow('TalkSys/SYS_Player:960_04', false)
    event_flags_system['cLand:RcoMoveReservedAnyone'] = 2
    event_flags_system['cPlayer:RcoMoveHousingSetSomeBuild'] = true
    return

flow HousingFinish_CampSiteMove:
    Player.OpenMessageWindow('TalkSys/SYS_Player:960_05', false)
    event_flags_system['cLand:RcoMoveReservedAnyone'] = 2
    event_flags_system['cPlayer:RcoMoveHousingSetSomeBuild'] = true
    return

