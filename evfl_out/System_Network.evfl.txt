flow MultiplaySave:
    fEvent10 = EventFlowSystemActor.NetDemoType()
    if fEvent10 in (2, 3):
        EventFlowSystemActor.NetWaitDemo('cStartSave')
        EventFlowSystemActor.MessageLockNext(1)
        EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Save:001', false)
        if EventFlowSystemActor.NetIsInviteFriend():
            EventFlowSystemActor.SaveSimpleSave('cNet')
            if EventFlowSystemActor.CheckErrorType(3):
                EventFlowSystemActor.NetDemoNextStep('cSaveFailed')
            else:
                EventFlowSystemActor.NetDemoNextStep('cSaveSuccess')
        else:
            EventFlowSystemActor.NetWaitDemo('cEndSave')
        EventFlowSystemActor.MessageUnlockNext()
        EventFlowSystemActor.MessageSuspend()
        EventFlowSystemActor.NetDemoNextStep('cSaveDone')
    elif fEvent10 == 1:
        if not EventFlowSystemActor.NetIsDemoPlayer():
            EventFlowSystemActor.NetWaitDemo('cStartSave')
            EventFlowSystemActor.MessageLockNext(1)
            EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Save:001', false)
            if EventFlowSystemActor.NetIsInviteFriend():
                EventFlowSystemActor.SaveSimpleSave('cNet')
                if EventFlowSystemActor.CheckErrorType(3):
                    EventFlowSystemActor.NetDemoNextStep('cSaveFailed')
                else:
                    EventFlowSystemActor.NetDemoNextStep('cSaveSuccess')
            else:
                EventFlowSystemActor.NetWaitDemo('cEndSave')
            EventFlowSystemActor.MessageUnlockNext()
            EventFlowSystemActor.MessageSuspend()
            EventFlowSystemActor.NetDemoNextStep('cSaveDone')
    return

flow VisitEndMileGet:
    EventFlowSystemActor.WaitFaderSleep()
    EventFlowSystemActor.WaitSpecialDemoEnter('cTravelReturn')
    if event_flags_system['cPlayer:VisitFriendMileageGet']:
        event_flags_system['cPlayer:VisitFriendMileageGet'] = false
        if not event_flags_system['cPlayer:DodTodayFlightMileGet']:
            EventFlowSystemActor.UISonkatsuPointAppear()
            if EventFlowSystemActor.IsDifferentAreaVisit():
                EventFlowSystemActor.LifeSupportPointCountDown(1200, false)
            else:
                EventFlowSystemActor.LifeSupportPointCountDown(800, false)
            event_flags_system['cPlayer:DodTodayFlightMileGet'] = true
            EventFlowSystemActor.UISonkatsuPointDisappear()
    EventFlowSystemActor.SpecialDemoEnd('cReturnMulti')
    return

flow ForcePurgeAttention:
    if not event_flags_system['cPlayer:OhirakiRollbackTutorial']:
        EventFlowSystemActor.OpenMessageWindow('Dialog/DIALOG_Msg:0805', true)
        event_flags_system['cPlayer:OhirakiRollbackTutorial'] = true
    return

