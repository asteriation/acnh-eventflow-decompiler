flow Hgc_Chk_Closeness:
    if event_flags_system['cPlayer:KotonoQuestCount'] < 20:
        subflow_results[0] = 0
    elif event_flags_system['cPlayer:KotonoQuestCount'] >= 50:
        subflow_results[0] = 2
    else:
        subflow_results[0] = 1
    return

flow Root:
    if EventFlowSystemActor.IsMyVillage():
        run Hgc_Chk_Closeness
        EventFlowSystemActor.SetTagFromSystem(0, 'cFashionTheme', 'cDegit', '', 0)
        if event_flags_system['cPlayer:KotonoQuestClearFlag']:
            run SNPC_hgc_02_AfterQuest::Root
        elif event_flags_system['cPlayer:KotonoQuestStartFlag']:
            run SNPC_hgc_01_NowQuest::Root
        else:
            run SNPC_hgc_00_BeforeQuest::Root
    else:
        fEvent10 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
        if fEvent10 == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:150', false)
        elif fEvent10 == 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:151', false)
        elif fEvent10 == 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:152', false)
    return

