flow Root:
    if not ((not event_flags_system['cPlayer:PlayerStungByBee']) or (event_flag_npc['cNpcMemory:TalkBeefaceToday']) or (EventFlowSystemActor.SystemIsCanNotLookFace())):
        if event_flags_system['cPlayer:GotMedicineRecipe']:
entrypoint Event3:
            fEvent3 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
            if fEvent3 == 0:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:001', false)
                event_flags_npc['cNpcMemory:TalkBeefaceToday'] = true
                event_flags_npc['cNpcMemory:AcquaintanceshipFlagOff'] = true
                EventFlowSystemActor.ExitFlowchart()
            elif fEvent3 == 1:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:002', false)
                event_flags_npc['cNpcMemory:TalkBeefaceToday'] = true
                event_flags_npc['cNpcMemory:AcquaintanceshipFlagOff'] = true
                EventFlowSystemActor.ExitFlowchart()
            elif fEvent3 == 2:
                run Medicine
                event_flags_npc['cNpcMemory:TalkBeefaceToday'] = true
                event_flags_npc['cNpcMemory:AcquaintanceshipFlagOff'] = true
                EventFlowSystemActor.ExitFlowchart()
        elif (EventFlowSystemActor.SystemHasBaggageSpace(1, 'cPocketBag')) and (MainNpc.NpcIsSitting() not in (0, 1, 2, 3, 5)) and (event_flags_system['cPlayer:MainmenuRecipe']):
            run BeeFace_GetMedicineRecipe
            event_flags_npc['cNpcMemory:TalkBeefaceToday'] = true
            event_flags_npc['cNpcMemory:AcquaintanceshipFlagOff'] = true
            EventFlowSystemActor.ExitFlowchart()
        else:
            run sub_Event20
    run sub_tm!Root

flow Medicine:
    MainNpc.SetDeliveryItemAtRandom(2777, true, 'cVillageRemakePattern', 0)
    if (EventFlowSystemActor.SystemHasBaggageSpace(1, 'cPocketBag')) and (MainNpc.NpcIsSitting() not in (0, 1, 2, 3, 5)) and (MainNpc.CheckNpcFavorLevel() in (0, 1, 2, 3, 4)):
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:006', false)
        MainNpc.NpcDelivery('Default', 1)
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:007', false)
    else:
        run sub_Event10
    return

flow BeeFace_NormalTalk:
    run Event3
    return

flow BeeFace_GetMedicineRecipe:
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:011', false)
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:012', true)
    MainNpc.NpcSetRewardRecipe(2777, false)
    MainNpc.SetDeliveryItem(1, true)
    MainNpc.NpcDelivery('Keep', 1)
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:013', false)
    MainNpc.NpcDelivery('Default', 2)
    event_flags_system['cPlayer:GotMedicineRecipe'] = true
    return

flow sub_tm!Root:
    return

flow sub_Event20:
    run BeeFace_NormalTalk

flow sub_Event10:
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:005', false)

