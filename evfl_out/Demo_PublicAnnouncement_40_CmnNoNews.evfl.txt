flow April:
    if EventFlowSystemActor.EnvWeatherArea() == cWeatherArea_North:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_04_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_04_02', false)
    return

flow August:
    if EventFlowSystemActor.EnvWeatherArea() == cWeatherArea_North:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_08_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_08_02', false)
    return

flow February:
    if EventFlowSystemActor.EnvHourCompare(21, -1, true, false) == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_02_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_02_02', false)
    return

flow Jan:
    if EventFlowSystemActor.EnvWeatherArea() == cWeatherArea_North:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_01_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_01_02', false)
    return

flow July:
    if EventFlowSystemActor.EnvWeatherArea() == cWeatherArea_North:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_07_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_07_02', false)
    return

flow May:
    if EventFlowSystemActor.EnvWeatherArea() == cWeatherArea_North:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_05_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_05_02', false)
    return

flow October:
    if EventFlowSystemActor.EnvHourCompare(22, -1, true, false) == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_10_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_10_02', false)
    return

flow RcoNoNews_Normal:
    run Event21
    return

flow Root:
    run Demo_PublicAnnouncement_22_CmnNoNewsChk::Root
    if subflow_results[0] != 0:
        if subflow_results[15] == 0:
            if subflow_results[12] != 0:
                run Demo_PublicAnnouncement_41_CmnNoNews_Hint::SeasonNews_Sza
            elif EventFlowSystemActor.EnvSameDate('cEndOfTheMonth', 'cGrowUpTime'):
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:801', false)
                if EventFlowSystemActor.EnvHourCompare(2, -1, true, false) == 0:
                    if EventFlowSystemActor.EnvHourCompare(0, -1, true, false) == 0:
                        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:802', false)
                        run Sza_LastDayOfMonthA
                    else:
                        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:803', false)
                        run Sza_LastDayOfMonthB
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:901', true)
            else:
                fEvent92 = EventFlowSystemActor.EnvSpecialWeather()
                if fEvent92 == Normal0:
                    run SzaNoNews_Normal
                elif fEvent92 in (HeavyShowerMorning, HeavyShowerAfternoon):
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:600', false)
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:602', false)
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:901', true)
                elif fEvent92 == HeavyShowerEvening:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:600', false)
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:603', false)
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:901', true)
                elif fEvent92 in (Rainbow, DoubleRainbow, AuroraBorealis0, AuroraBorealis1, Normal8, Normal9):
                    run SzaNoNews_Normal
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:901', true)
    elif subflow_results[15] != 0:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:901', true)
    elif subflow_results[12] != 0:
        run Demo_PublicAnnouncement_41_CmnNoNews_Hint::SeasonNews_Rco
    elif EventFlowSystemActor.EnvSameDate('cEndOfTheYear', 'cNowTime'):
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:600', false)
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:601', false)
    else:
        fEvent87 = EventFlowSystemActor.EnvSpecialWeather()
        if fEvent87 == Normal0:
entrypoint Event21:
            if event_flags_system['cPlayer:PAnnounceHintRnd']:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:801', false)
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:802', false)
                if EventFlowSystemActor.PercentChoice(30):
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:701', false)
                    run Demo_PublicAnnouncement_41_CmnNoNews_Hint::Root
                else:
                    event_flags_system['cPlayer:PAnnounceHintRnd'] = false
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:803', false)
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:799', false)
            else:
                event_flags_system['cPlayer:PAnnounceHintRnd'] = true
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:800', false)
                run Demo_PublicAnnouncement_41_CmnNoNews_Hint::Root
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:799', false)
        elif fEvent87 in (HeavyShowerMorning, HeavyShowerAfternoon):
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:600', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:602', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:799', false)
        elif fEvent87 == HeavyShowerEvening:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:600', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:603', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:799', false)
        elif fEvent87 in (Rainbow, DoubleRainbow, AuroraBorealis0, AuroraBorealis1, Normal8, Normal9):
            run RcoNoNews_Normal
    return

flow September:
    if EventFlowSystemActor.EnvWeatherArea() == cWeatherArea_North:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_09_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_09_02', false)
    return

flow SzaNoNews_Normal:
    if event_flags_system['cPlayer:TownNewsHeard1st']:
        fEvent117 = EventFlowSystemActor.RandomChoiceExcludePrevious3(true, 3)
        if fEvent117 == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:701', false)
            if EventFlowSystemActor.PercentChoice(5):
                if EventFlowSystemActor.LandFruit() == 0:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:703_01', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:703_02', false)
            else:
                if EventFlowSystemActor.PercentChoice(95):
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:702', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:831', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:899', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:901', true)
        elif fEvent117 == 1:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:820', false)
            fEvent112 = EventFlowSystemActor.EnvDayOfWeek()
            if fEvent112 == Sunday:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:821', false)
            elif fEvent112 == Monday:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:822', false)
            elif fEvent112 == Tuesday:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:823', false)
            elif fEvent112 == Wednesday:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:824', false)
            elif fEvent112 == Thursday:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:825', false)
            elif fEvent112 == Friday:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:826', false)
            elif fEvent112 == Saturday:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:827', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:828', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:901', true)
        elif fEvent117 == 2:
            run sub_grp!Event111
    else:
        run sub_grp!Event111
    return

flow Sza_LastDayOfMonthA:
    fEvent36 = EventFlowSystemActor.EnvMonth()
    if fEvent36 == January:
        run Jan
    elif fEvent36 == February:
        run February
    elif fEvent36 == March:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_03', false)
    elif fEvent36 == April:
        run April
    elif fEvent36 == May:
        run May
    elif fEvent36 == June:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_06', false)
    elif fEvent36 == July:
        run July
    elif fEvent36 == August:
        run August
    elif fEvent36 == September:
        run September
    elif fEvent36 == October:
        run October
    elif fEvent36 == November:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_11', false)
    return

flow Sza_LastDayOfMonthB:
    fEvent32 = EventFlowSystemActor.EnvMonth()
    if fEvent32 == February:
        run Jan
    elif fEvent32 == March:
        run February
    elif fEvent32 == April:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_03', false)
    elif fEvent32 == May:
        run April
    elif fEvent32 == June:
        run May
    elif fEvent32 == July:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_06', false)
    elif fEvent32 == August:
        run July
    elif fEvent32 == September:
        run August
    elif fEvent32 == October:
        run September
    elif fEvent32 == November:
        run October
    elif fEvent32 == December:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:804_11', false)
    return

flow sub_grp!Event111:
    fEvent111 = EventFlowSystemActor.EnvDayOfWeek()
    if fEvent111 == Sunday:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:805', false)
    elif fEvent111 == Monday:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:806', false)
    elif fEvent111 == Tuesday:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:807', false)
    elif fEvent111 == Wednesday:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:808', false)
    elif fEvent111 == Thursday:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:809', false)
    elif fEvent111 == Friday:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:810', false)
    elif fEvent111 == Saturday:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:811', false)

