flow NpcHousePlate:
    GeneralObject.SetTagFromSystem(0, 'cNpcNameplate', '"cDegit"', '""', 0)
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:001', false)
    return

flow Property_0_Selling:
    if EventFlowSystemActor.NpcHouseNum('cExist') < 6:
        EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:002', false)
    else:
        run ImmQBoard
    return

flow Property_1_Sold:
    if EventFlowSystemActor.NpcHouseNum('cExist') < 6:
        GeneralObject.SetTagFromSystem(0, 'cNpcNameplate', '"cDegit"', '""', 0)
        EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:003', false)
    else:
        run ImmQBoard
    return

flow CampSitePlate_0:
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:005', false)
    return

flow CampSitePlate_1:
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:006', false)
    return

flow TodaysFurniture:
    if EventFlowSystemActor.NetIsDreaming():
        EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Door:111_02', false)
    elif not EventFlowSystemActor.IsDuringBusinessHours('Market'):
        EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Door:111', false)
    elif EventFlowSystemActor.EnvHourOverGrowUp():
        EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Door:111_01', false)
    else:
        EventFlowSystemActor.SetTagFromSystem(0, 'cExpensivePurchase1', 'cDegit', '', 0)
        EventFlowSystemActor.SetTagFromSystem(1, 'cExpensivePurchase2', 'cDegit', '', 0)
        fEvent11 = EventFlowSystemActor.ShopLevel()
        if fEvent11 == NooksCrannyInitial:
            EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:011', false)
        elif fEvent11 == NooksCrannyUpgraded:
            EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:012', false)
    return

flow ImmQBoard:
    event_flags_system['cPlayerTemp:ImmQPutInFtrNum'] = 0
    fEvent69 = GeneralObject.SettlerQuest()
    if fEvent69 == 1:
        if event_flags_system['cLand:ImmQ_A_Complete']:
            run ImmQBoard_Clear
        else:
            EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:101_01', false)
            run sub_grp!Event34
    elif fEvent69 == 2:
        if event_flags_system['cLand:ImmQ_B_Complete']:
            run ImmQBoard_Clear
        else:
            EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:101_02', false)
            run sub_grp!Event34
    elif fEvent69 == 3:
        if event_flags_system['cLand:ImmQ_C_Complete']:
            run ImmQBoard_Clear
        else:
            EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:101_03', false)
            run sub_grp!Event34
    return

flow PlayerHouse_Moving:
    GeneralObject.SetTagFromSystem(0, 'cPlayerNameplate', '"cDegit"', '""', 0)
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:021', false)
    return

flow NpcHouse_Moving:
    GeneralObject.SetTagFromSystem(0, 'cNpcNameplate', '"cDegit"', '""', 0)
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:003_01', false)
    return

flow NpcTentPlate:
    GeneralObject.SetTagFromSystem(0, 'cNpcNameplate', '"cDegit"', '""', 0)
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:001_01', false)
    return

flow Market_Reserve:
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:007', false)
    return

flow Museum_Reserve:
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:008', false)
    return

flow Tailor_Reserve:
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:009', false)
    return

flow Museum_Moving:
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:008_01', false)
    return

flow ImmQBoard_Clear:
    GeneralObject.SetTagFromSystem(0, 'TagType', '"cDegit"', '""', 0)
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:103', false)
    return

flow sub_grp!Event34:
    if (EventFlowSystemActor.IsMyVillage()) and (event_flags_system['cPlayer:MakeVillagePlayerFlag']):
        EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:102', false)

