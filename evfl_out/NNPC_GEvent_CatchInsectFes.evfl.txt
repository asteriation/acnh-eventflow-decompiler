flow Month_1.3:
    if EventFlowSystemActor.EnvWeatherArea() == cWeatherArea_North:
        run Northern
    else:
        run Southern
    return

flow Month_1.4:
    if EventFlowSystemActor.EnvWeatherArea() == cWeatherArea_North:
        run Northern_1.4
    else:
        run Southern_1.4
    return

flow NNPC_AfterEV:
    if not event_flag_npc['cNpcMemory:GEventTalkAfterFlag']:
        event_flags_npc['cNpcMemory:GEventTalkAfterFlag'] = true
        fEvent50 = EventFlowSystemActor.RandomChoice3(3)
        if fEvent50 == 0:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:008', true)
        elif fEvent50 == 1:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:009', true)
        elif fEvent50 == 2:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:007', true)
        EventFlowSystemActor.ExitFlowchart()
    return

flow NNPC_BeforeEV:
    fEvent34 = EventFlowSystemActor.RandomChoice3(3)
    if fEvent34 == 0:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:001', true)
    elif fEvent34 == 1:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:002', true)
    elif fEvent34 == 2:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:003', true)
    EventFlowSystemActor.ExitFlowchart()
    return

flow NNPC_OpenEV:
    if event_flag_npc['cNpcMemory:GEventTalkProgressFlag']:
        fEvent19 = EventFlowSystemActor.RandomChoiceExcludePrevious4(4, true)
        if fEvent19 == 0:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:010', true)
        elif fEvent19 == 1:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:011', true)
        elif fEvent19 == 2:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:012', true)
        elif fEvent19 == 3:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:013', true)
        EventFlowSystemActor.ExitFlowchart()
    else:
        event_flags_npc['cNpcMemory:GEventTalkProgressFlag'] = true
        fEvent54 = EventFlowSystemActor.RandomChoiceExcludePrevious5(5, true)
        if fEvent54 == 0:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:004', true)
        elif fEvent54 == 1:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:005', true)
        elif fEvent54 == 2:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:006', true)
        elif fEvent54 == 3:
            run Month_1.3
        elif fEvent54 == 4:
            run Month_1.4
        EventFlowSystemActor.ExitFlowchart()
    return

flow Northern:
    fEvent12 = EventFlowSystemActor.EnvMonth()
    if fEvent12 == June:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:104', false)
    elif fEvent12 == July:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:105', false)
    elif fEvent12 == August:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:106', false)
    elif fEvent12 == September:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:107', false)
    return

flow Northern_1.4:
    fEvent29 = EventFlowSystemActor.EnvMonth()
    if fEvent29 == June:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:201', false)
    elif fEvent29 == July:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:202', false)
    elif fEvent29 == August:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:203', false)
    elif fEvent29 == September:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:204', false)
    return

flow Root:
    if EventFlowSystemActor.SystemCheckNowStage('cField'):
        fEvent79 = EventFlowSystemActor.EventCheck('InsectConvention')
        if fEvent79 == 0:
            run NNPC_BeforeEV
        elif fEvent79 == 1:
            run NNPC_OpenEV
        elif fEvent79 == 2:
            if EventFlowSystemActor.EnvHourCompare(19, -1, true, true) in (0, 1):
                run NNPC_AfterEV
    return

flow Southern:
    fEvent24 = EventFlowSystemActor.EnvMonth()
    if fEvent24 == January:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:106', false)
    elif fEvent24 == February:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:107', false)
    elif fEvent24 == November:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:104', false)
    elif fEvent24 == December:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:105', false)
    return

flow Southern_1.4:
    fEvent38 = EventFlowSystemActor.EnvMonth()
    if fEvent38 == January:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:207', false)
    elif fEvent38 == February:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:208', false)
    elif fEvent38 == November:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:205', false)
    elif fEvent38 == December:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchInsectFes:206', false)
    return

