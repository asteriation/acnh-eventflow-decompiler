flow Hgc_Check_Chk:
    if MainNpc.HgcPlayerDefaultOutfit():
        fEvent86 = subflow_results[0]
        if fEvent86 == 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:024', false)
        elif fEvent86 == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:023', false)
        elif fEvent86 == 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:025', false)
        EventFlowSystemActor.ExitFlowchart()
    elif Player.PlayerIsUseCoordinate():
        fEvent113 = subflow_results[0]
        if fEvent113 == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:035', false)
        elif fEvent113 == 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:036', false)
        elif fEvent113 == 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:037', false)
        EventFlowSystemActor.ExitFlowchart()
    elif event_flags_system['cPlayer:EquipLicenseHelmet']:
        fEvent149 = subflow_results[0]
        if fEvent149 == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:038_01', false)
        elif fEvent149 == 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:038_02', false)
        elif fEvent149 == 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:038_03', false)
        EventFlowSystemActor.ExitFlowchart()
    elif Player.PlayerOutfitMarinesuit():
        if subflow_results[0] in (0, 1):
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:167', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:168', false)
        EventFlowSystemActor.ExitFlowchart()
    elif (EventFlowSystemActor.PlayerIsEquipItem('cAny', false, false, 7210, 4287, 8228, 4288, 8372, 8370, 8254, 8252)) or (EventFlowSystemActor.PlayerIsEquipItem('cAny', false, false, 8368, 8251, 8367, 8369, 8253, 65534, 65534, 65534)) or (EventFlowSystemActor.PlayerIsEquipItem('cAny', false, false, 5837, 5836, 5822, 9557, 9558, 65534, 65534, 65534)) or (EventFlowSystemActor.PlayerIsEquipItem('cAny', false, false, 9555, 9552, 9556, 9553, 9554, 5530, 65534, 65534)):
        if MainNpc.HgcIsChangeOutfit():
            if subflow_results[0] == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:160', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:161', false)
            EventFlowSystemActor.ExitFlowchart()
        else:
            MainNpc.HgcThemeMessage()
            EventFlowSystemActor.ExitFlowchart()
    elif not MainNpc.HgcIsChangeOutfit():
        if MainNpc.HgcFashionCheckResult() in (0, 1, 2):
            MainNpc.HgcThemeMessage()
            EventFlowSystemActor.ExitFlowchart()
        else:
            fEvent131 = subflow_results[0]
            if fEvent131 == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:164', false)
            elif fEvent131 == 1:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:165', false)
            elif fEvent131 == 2:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:166', false)
            run Hgc_Chk_OK
            EventFlowSystemActor.ExitFlowchart()
    return

flow Hgc_Chk_OK:
    run Event7
    return

flow Hgc_Clear:
    fEvent37 = subflow_results[0]
    if fEvent37 == 1:
        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:057', false)
    elif fEvent37 == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:047', false)
    elif fEvent37 == 2:
        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:067', false)
    fEvent21 = MainNpc.HgcFashionCheckResult()
    if fEvent21 == 0:
        event_flags_system['cPlayer:KotonoQuestCount'] += 2
        EventFlowSystemActor.PlayReport(0, 'cHgcFashionCheckResult')
    elif fEvent21 == 1:
        event_flags_system['cPlayer:KotonoQuestCount'] += 3
        EventFlowSystemActor.PlayReport(1, 'cHgcFashionCheckResult')
    elif fEvent21 == 3:
        event_flags_system['cPlayer:KotonoQuestCount'] += 5
        EventFlowSystemActor.PlayReport(3, 'cHgcFashionCheckResult')
        event_flags_system['cPlayer:KotonoQuestClearCount'] += 1
    elif fEvent21 == 2:
        event_flags_system['cPlayer:KotonoQuestCount'] += 4
        EventFlowSystemActor.PlayReport(2, 'cHgcFashionCheckResult')
        event_flags_system['cPlayer:KotonoQuestClearCount'] += 1
    event_flags_system['cPlayer:KotonoQuestClearFlag'] = true
    return

flow Hgc_Get_Coupon:
    if event_flags_system['cPlayer:KotonoGotTicketFlag']:
        fEvent34 = subflow_results[0]
        if fEvent34 == 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:062', false)
        elif fEvent34 == 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:052', false)
        elif fEvent34 == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:042', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:041', false)
        event_flags_system['cPlayer:KotonoGotTicketFlag'] = true
    if MainNpc.HgcFashionCheckResult() in (0, 1, 2):
        EventFlowSystemActor.SelectRewardItemDirect(5932, 1, 'cVillageRemakePattern', 0)
        fEvent30 = subflow_results[0]
        if fEvent30 == 0:
            EventFlowSystemActor.SystemMailSend('cHgc', 'MAIL_SNpc_hgc', 'cFastTomorrow', 'cReward', 'cNone', false, 1)
        elif fEvent30 == 1:
            EventFlowSystemActor.SystemMailSend('cHgc', 'MAIL_SNpc_hgc', 'cFastTomorrow', 'cReward', 'cNone', false, 2)
        elif fEvent30 == 2:
            EventFlowSystemActor.SystemMailSend('cHgc', 'MAIL_SNpc_hgc', 'cFastTomorrow', 'cReward', 'cNone', false, 3)
    else:
        EventFlowSystemActor.SelectRewardItemDirect(5932, 2, 'cVillageRemakePattern', 0)
        fEvent87 = subflow_results[0]
        if fEvent87 == 0:
            EventFlowSystemActor.SystemMailSend('cHgc', 'MAIL_SNpc_hgc', 'cFastTomorrow', 'cReward', 'cNone', false, 4)
        elif fEvent87 == 1:
            EventFlowSystemActor.SystemMailSend('cHgc', 'MAIL_SNpc_hgc', 'cFastTomorrow', 'cReward', 'cNone', false, 5)
        elif fEvent87 == 2:
            EventFlowSystemActor.SystemMailSend('cHgc', 'MAIL_SNpc_hgc', 'cFastTomorrow', 'cReward', 'cNone', false, 6)
    return

flow Hgc_Sample_Chk:
    if not event_flags_system['cPlayer:KotonoGotSampleFlag']:
        MainNpc.DecideEventReward('cKotonoHint')
        MainNpc.SetItemName(0, 1, 0)
        if EventFlowSystemActor.ShoppingCapacity(65534, 'cReward'):
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:032', false)
            run SNPC_hgc_00_BeforeQuest::Hgc_Get_Sample
            EventFlowSystemActor.ExitFlowchart()
    return

flow Root:
    run Hgc_Sample_Chk
    run Hgc_Check_Chk
    fEvent2 = subflow_results[0]
    if fEvent2 == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:026', false)
    elif fEvent2 == 1:
        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:027', false)
    elif fEvent2 == 2:
        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:028', false)
entrypoint Event7:
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:040', false)
        EventFlowSystemActor.WaitFrame(4)
        if MainNpc.NpcIsEquipedHandTool(0):
            MainNpc.RequestSimple('MaReHgcCheckRain', false)
        else:
            MainNpc.RequestSimple('MaReHgcCheck', false)
        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:040_01', false)
        run hgc_Comment
        run Hgc_Get_Coupon
        if MainNpc.HgcFashionCheckResult() in (0, 1):
            run Hgc_Clear
        else:
            fEvent16 = subflow_results[0]
            if fEvent16 == 2:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:063', false)
            elif fEvent16 == 1:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:053', false)
            elif fEvent16 == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:043', false)
            MainNpc.DecideEventReward('cKotonoReward')
            if EventFlowSystemActor.ShoppingCapacity(65534, 'cReward'):
                MainNpc.MessageSuspend()
                MainNpc.SetDeliveryItem(1, true)
                MainNpc.SetItemName(0, 1, 4)
                if not MainNpc.NpcIsEquipedHandTool(0):
                    MainNpc.NpcChangeHandTool(false, 'cNone', 65534)
                MainNpc.NpcDelivery('"Default"', 1)
                if event_flags_system['cPlayer:KotonoKateTalkFlag']:
                    fEvent94 = subflow_results[0]
                    if fEvent94 == 2:
                        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:068', false)
                    elif fEvent94 == 0:
                        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:049', false)
                    elif fEvent94 == 1:
                        MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:058', false)
                    if MainNpc.HgcFreeQuery2('cHgcQueryType_FirstGet'):
                        fEvent14 = subflow_results[0]
                        if fEvent14 == 2:
                            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:065', false)
                        elif fEvent14 == 1:
                            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:055', false)
                        elif fEvent14 == 0:
                            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:045', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:048', false)
                    event_flags_system['cPlayer:KotonoKateTalkFlag'] = true
                run Hgc_Clear
                if not MainNpc.NpcIsEquipedHandTool(0):
                    MainNpc.NpcChangeHandTool(false, 'cNone', 7285)
            else:
                fEvent20 = subflow_results[0]
                if fEvent20 == 0:
                    MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:044', false)
                    EventFlowSystemActor.SystemMailSend('cHgc', 'MAIL_SNpc_hgc', 'cFastTomorrow', 'cReward', 'cNone', false, 7)
                elif fEvent20 == 2:
                    MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:064', false)
                    EventFlowSystemActor.SystemMailSend('cHgc', 'MAIL_SNpc_hgc', 'cFastTomorrow', 'cReward', 'cNone', false, 9)
                elif fEvent20 == 1:
                    MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:054', false)
                    EventFlowSystemActor.SystemMailSend('cHgc', 'MAIL_SNpc_hgc', 'cFastTomorrow', 'cReward', 'cNone', false, 8)
                run Hgc_Clear
    else:
        fEvent8 = subflow_results[0]
        if fEvent8 == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:029', false)
        elif fEvent8 == 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:030', false)
        elif fEvent8 == 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:031', false)
        MainNpc.HgcThemeMessage()
    return

flow hgc_Comment:
    if subflow_results[0] in (0, 1):
        fEvent60 = MainNpc.HgcFashionCheckResult()
        if fEvent60 == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:300', false)
        elif fEvent60 == 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:301', false)
        elif fEvent60 == 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:302', false)
        elif fEvent60 == 3:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:303', false)
    else:
        fEvent19 = MainNpc.HgcFashionCheckResult()
        if fEvent19 == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:320', false)
        elif fEvent19 == 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:321', false)
        elif fEvent19 == 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:322', false)
        elif fEvent19 == 3:
            MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:323', false)
    return

