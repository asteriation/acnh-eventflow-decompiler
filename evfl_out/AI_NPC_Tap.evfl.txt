flow Init:
    MainNpc.NpcAISetting(8, true)
    MainNpc.NpcRegistAIBlackBoard('SpeakTypeBed', 1)
    MainNpc.NpcAISetRequestSpeakFunc('cDreamBedInPlaza', false)
    if EventFlowSystemActor.SystemCheckNowStage('cIdrDream'):
        if event_flags_system['cLandTemp:TapIndoorPos']:
            MainNpc.NpcAISetPosByRail(0, 1, 60.0, true)
        else:
            MainNpc.NpcAISetPosByRail(0, 0, 90.0, true)
    return

flow Root:
    if EventFlowSystemActor.SystemCheckNowStage('cIdrDream'):
        MainNpc.NpcAISetting(4, false)
        run AI_NPC_Common::ContinueSpeak
    elif event_flags_system['cLandTemp:TapDreamFirstTalkDone']:
        MainNpc.NpcChangeTurnDefaultState('cTurn', '', 'InDreamTalk', 'SNPC_tap_02_InDreaming', true, false, true, 1, 0.0, '')
    else:
        MainNpc.NpcAISetting(4, false)
        run AI_NPC_Common::ContinueSpeak
    return

